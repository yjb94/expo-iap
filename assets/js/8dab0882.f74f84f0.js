"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[5912],{1485:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});var s=i(2916),r=i(4848),d=i(8453);const c={slug:"v2-8-0-migration-guide",title:"v2.8.0 Migration Guide - iOS Field Naming Convention Update",authors:["hyochan"],tags:["release","breaking-change","migration"]},t="Migrating to expo-iap v2.8.0",o={authorsImageUrls:[void 0]},l=[{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"What Changed",id:"what-changed",level:2},{value:"iOS Changes",id:"ios-changes",level:2},{value:"Product Types",id:"product-types",level:3},{value:"Purchase Types",id:"purchase-types",level:3},{value:"iOS Suffix Changes (Ios \u2192 IOS)",id:"ios-suffix-changes-ios--ios",level:3},{value:"ID Suffix Changes (ID \u2192 Id)",id:"id-suffix-changes-id--id",level:3},{value:"Function Parameter Changes",id:"function-parameter-changes",level:3},{value:"Android Changes",id:"android-changes",level:2},{value:"Product Types",id:"product-types-1",level:3},{value:"Purchase Types",id:"purchase-types-1",level:3},{value:"Request Props",id:"request-props",level:3},{value:"How to Migrate",id:"how-to-migrate",level:2},{value:"Step 1: Update Field References",id:"step-1-update-field-references",level:3},{value:"Step 2: Update Type Imports and Declarations",id:"step-2-update-type-imports-and-declarations",level:3},{value:"Step 3: Update Type Checks",id:"step-3-update-type-checks",level:3},{value:"Step 4: Update ID Field References",id:"step-4-update-id-field-references",level:3},{value:"Step 5: Update Subscription Helpers",id:"step-5-update-subscription-helpers",level:3},{value:"Quick Migration Script",id:"quick-migration-script",level:2},{value:"Why This Change?",id:"why-this-change",level:2},{value:"Need Help?",id:"need-help",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,r.jsx)(n.p,{children:"Version 2.8.0 introduces naming convention changes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS suffix convention"}),": Fields with iOS suffixes now use uppercase ",(0,r.jsx)(n.code,{children:"IOS"})," instead of ",(0,r.jsx)(n.code,{children:"Ios"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ID suffix convention"}),": All fields ending with ",(0,r.jsx)(n.code,{children:"ID"})," now use ",(0,r.jsx)(n.code,{children:"Id"})," instead for consistency (e.g., ",(0,r.jsx)(n.code,{children:"subscriptionGroupID"})," \u2192 ",(0,r.jsx)(n.code,{children:"subscriptionGroupId"}),", ",(0,r.jsx)(n.code,{children:"bundleID"})," \u2192 ",(0,r.jsx)(n.code,{children:"bundleId"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Android field names remain unchanged as they already follow the correct convention (e.g., ",(0,r.jsx)(n.code,{children:"autoRenewingAndroid"}),", ",(0,r.jsx)(n.code,{children:"purchaseTokenAndroid"}),")."]}),"\n",(0,r.jsx)(n.h2,{id:"what-changed",children:"What Changed"}),"\n",(0,r.jsx)(n.h2,{id:"ios-changes",children:"iOS Changes"}),"\n",(0,r.jsx)(n.h3,{id:"product-types",children:"Product Types"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"ProductIOS & SubscriptionProductIOS:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"displayName"})," - Product display name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isFamilyShareable"})," - Family sharing availability"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"jsonRepresentation"})," - JSON representation of product"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introductoryPriceNumberOfPeriodsIOS"})," - Introductory price period count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introductoryPriceSubscriptionPeriodIOS"})," - Introductory price period"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introductoryPriceAsAmountIOS"})," - Introductory price amount"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introductoryPricePaymentModeIOS"})," - Introductory price payment mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscriptionPeriodNumberIOS"})," - Subscription period number"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscriptionPeriodUnitIOS"})," - Subscription period unit"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"SubscriptionInfo:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscriptionGroupId"})," - Subscription group identifier (changed from ",(0,r.jsx)(n.code,{children:"subscriptionGroupID"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"purchase-types",children:"Purchase Types"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ProductPurchaseIOS"})," includes these StoreKit 2 fields:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"quantityIOS"}),", ",(0,r.jsx)(n.code,{children:"originalTransactionDateIOS"}),", ",(0,r.jsx)(n.code,{children:"originalTransactionIdentifierIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"expirationDateIOS"}),", ",(0,r.jsx)(n.code,{children:"webOrderLineItemIdIOS"}),", ",(0,r.jsx)(n.code,{children:"environmentIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"storefrontCountryCodeIOS"}),", ",(0,r.jsx)(n.code,{children:"appBundleIdIOS"}),", ",(0,r.jsx)(n.code,{children:"productTypeIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscriptionGroupIdIOS"}),", ",(0,r.jsx)(n.code,{children:"isUpgradedIOS"}),", ",(0,r.jsx)(n.code,{children:"ownershipTypeIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"reasonIOS"}),", ",(0,r.jsx)(n.code,{children:"reasonStringRepresentationIOS"}),", ",(0,r.jsx)(n.code,{children:"transactionReasonIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"revocationDateIOS"}),", ",(0,r.jsx)(n.code,{children:"revocationReasonIOS"}),", ",(0,r.jsx)(n.code,{children:"offerIOS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"priceIOS"}),", ",(0,r.jsx)(n.code,{children:"currencyIOS"}),", ",(0,r.jsx)(n.code,{children:"jwsRepresentationIOS"})," (deprecated)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"AppTransactionIOS"})," (iOS 16.0+):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"appTransactionId"})," - App transaction identifier (changed from ",(0,r.jsx)(n.code,{children:"appTransactionID"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bundleId"})," - Bundle identifier (changed from ",(0,r.jsx)(n.code,{children:"bundleID"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"appId"})," - App identifier (changed from ",(0,r.jsx)(n.code,{children:"appID"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"appVersionId"})," - App version identifier (changed from ",(0,r.jsx)(n.code,{children:"appVersionID"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Breaking Changes - Field Renaming:"})}),"\n",(0,r.jsx)(n.h3,{id:"ios-suffix-changes-ios--ios",children:"iOS Suffix Changes (Ios \u2192 IOS)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Field Name"}),(0,r.jsx)(n.th,{children:"New Field Name"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"quantityIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"quantityIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"originalTransactionDateIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"originalTransactionDateIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"originalTransactionIdentifierIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"originalTransactionIdentifierIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appBundleIdIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appBundleIdIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"productTypeIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"productTypeIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionGroupIdIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionGroupIdIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"webOrderLineItemIdIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"webOrderLineItemIdIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expirationDateIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expirationDateIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isUpgradedIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isUpgradedIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ownershipTypeIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ownershipTypeIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revocationDateIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revocationDateIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revocationReasonIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revocationReasonIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"transactionReasonIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"transactionReasonIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"environmentIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"environmentIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storefrontCountryCodeIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storefrontCountryCodeIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reasonIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reasonIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"offerIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"offerIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"priceIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"priceIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currencyIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currencyIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwsRepresentationIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwsRepresentationIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reasonStringRepresentationIos"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reasonStringRepresentationIOS"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"id-suffix-changes-id--id",children:"ID Suffix Changes (ID \u2192 Id)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Field Name"}),(0,r.jsx)(n.th,{children:"New Field Name"}),(0,r.jsx)(n.th,{children:"Type/Context"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionGroupID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionGroupId"})}),(0,r.jsx)(n.td,{children:"SubscriptionInfo"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appTransactionID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appTransactionId"})}),(0,r.jsx)(n.td,{children:"AppTransactionIOS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bundleID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bundleId"})}),(0,r.jsx)(n.td,{children:"AppTransactionIOS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appId"})}),(0,r.jsx)(n.td,{children:"AppTransactionIOS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appVersionID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"appVersionId"})}),(0,r.jsx)(n.td,{children:"AppTransactionIOS"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"function-parameter-changes",children:"Function Parameter Changes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Function"}),(0,r.jsx)(n.th,{children:"Old Parameter"}),(0,r.jsx)(n.th,{children:"New Parameter"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isEligibleForIntroOfferIOS"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"groupID"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"groupId"})})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"android-changes",children:"Android Changes"}),"\n",(0,r.jsx)(n.h3,{id:"product-types-1",children:"Product Types"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"ProductAndroid & SubscriptionProductAndroid:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," - Product display name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"oneTimePurchaseOfferDetails"})," - One-time purchase offer details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscriptionOfferDetails"})," - Subscription offer details array"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"purchase-types-1",children:"Purchase Types"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ProductPurchaseAndroid"})," includes these Android Billing Library fields:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ids"})," - Array of product IDs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"purchaseTokenAndroid"})," - Android purchase token (deprecated, use ",(0,r.jsx)(n.code,{children:"purchaseToken"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dataAndroid"})," - Purchase data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"signatureAndroid"})," - Purchase signature"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoRenewingAndroid"})," - Auto-renewal status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"purchaseStateAndroid"})," - Purchase state enum"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isAcknowledgedAndroid"})," - Acknowledgment status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"packageNameAndroid"})," - App package name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"developerPayloadAndroid"})," - Developer payload"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"obfuscatedAccountIdAndroid"})," - Obfuscated account ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"obfuscatedProfileIdAndroid"})," - Obfuscated profile ID"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"request-props",children:"Request Props"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"RequestPurchaseAndroidProps:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isOfferPersonalized"})," - For Android Billing V5 personalized pricing"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"No Breaking Changes"})," - All Android fields maintain existing naming convention."]}),"\n",(0,r.jsx)(n.h2,{id:"how-to-migrate",children:"How to Migrate"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-update-field-references",children:"Step 1: Update Field References"}),"\n",(0,r.jsx)(n.p,{children:"Search your codebase for any references to the old field names and update them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Before (v2.7.x)\nconst purchase = await requestPurchase({sku: 'product-id'});\nif (purchase.expirationDateIos) {\n  console.log('Expires:', purchase.expirationDateIos);\n}\n\n// After (v2.8.0)\n// Note: requestPurchase API signature has also changed in v2.8.0\nconst purchase = await requestPurchase({\n  request: {\n    ios: {sku: 'product-id'},\n    android: {skus: ['product-id']},\n  },\n  type: 'inapp',\n});\nif (purchase.expirationDateIOS) {\n  console.log('Expires:', purchase.expirationDateIOS);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-update-type-imports-and-declarations",children:"Step 2: Update Type Imports and Declarations"}),"\n",(0,r.jsxs)(n.p,{children:["Type names have also been updated to use uppercase ",(0,r.jsx)(n.code,{children:"IOS"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Before (v2.7.x)\nimport {\n  ProductIOS,\n  ProductPurchaseIos,\n  SubscriptionProductIOS,\n  ProductStatusIos,\n} from 'expo-iap';\n\n// After (v2.8.0)\nimport {\n  ProductIOS,\n  ProductPurchaseIOS,\n  SubscriptionProductIOS,\n  ProductStatusIOS,\n} from 'expo-iap';\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," The old type names are still available as deprecated aliases for backward compatibility, but we recommend updating to the new names."]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-update-type-checks",children:"Step 3: Update Type Checks"}),"\n",(0,r.jsx)(n.p,{children:"If you're using TypeScript and checking for iOS-specific fields:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Before (v2.7.x)\nif ('expirationDateIos' in purchase) {\n  // Handle subscription\n}\n\n// After (v2.8.0)\nif ('expirationDateIOS' in purchase) {\n  // Handle subscription\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-update-id-field-references",children:"Step 4: Update ID Field References"}),"\n",(0,r.jsxs)(n.p,{children:["Update all ID field references to use ",(0,r.jsx)(n.code,{children:"Id"})," instead:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Before (v2.7.x)\nconst appTransaction = await getAppTransactionIOS();\nconsole.log(appTransaction.bundleID);\nconsole.log(appTransaction.appID);\n\n// After (v2.8.0)\nconst appTransaction = await getAppTransactionIOS();\nconsole.log(appTransaction.bundleId);\nconsole.log(appTransaction.appId);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-update-subscription-helpers",children:"Step 5: Update Subscription Helpers"}),"\n",(0,r.jsx)(n.p,{children:"If you're using the subscription helper functions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Before (v2.7.x)\nconst subscription = {\n  expirationDateIos: purchase.expirationDateIos,\n  environmentIos: purchase.environmentIos,\n};\n\n// After (v2.8.0)\nconst subscription = {\n  expirationDateIOS: purchase.expirationDateIOS,\n  environmentIOS: purchase.environmentIOS,\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quick-migration-script",children:"Quick Migration Script"}),"\n",(0,r.jsx)(n.p,{children:"You can use this regex find/replace pattern in your IDE to quickly update most occurrences:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Find Pattern (Regex):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"\\b(\\w+)(Ios)\\b\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Replace Pattern:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"$1IOS\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(n.strong,{children:"Note:"})," Review each replacement carefully as this might affect non-field references."]}),"\n",(0,r.jsx)(n.h2,{id:"why-this-change",children:"Why This Change?"}),"\n",(0,r.jsx)(n.p,{children:"These changes align with widely-adopted naming conventions:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS suffix"}),": Acronyms at the end of identifiers are written in uppercase (e.g., ",(0,r.jsx)(n.code,{children:"dataIOS"}),", ",(0,r.jsx)(n.code,{children:"configIOS"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ID suffix"}),": The ",(0,r.jsx)(n.code,{children:"Id"})," convention is more common in modern JavaScript/TypeScript codebases (e.g., ",(0,r.jsx)(n.code,{children:"userId"}),", ",(0,r.jsx)(n.code,{children:"productId"}),", ",(0,r.jsx)(n.code,{children:"transactionId"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This makes the codebase more consistent and follows best practices in the TypeScript/JavaScript ecosystem."}),"\n",(0,r.jsx)(n.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,r.jsx)(n.p,{children:"If you encounter any issues during migration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Check our ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/issues",children:"GitHub Issues"})]}),"\n",(0,r.jsxs)(n.li,{children:["Join our ",(0,r.jsx)(n.a,{href:"https://hyo.dev/joinSlack",children:"Slack community"})]}),"\n",(0,r.jsxs)(n.li,{children:["Review the ",(0,r.jsx)(n.a,{href:"https://expo-iap.hyo.dev",children:"full documentation"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},2916:e=>{e.exports=JSON.parse('{"permalink":"/blog/v2-8-0-migration-guide","editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/blog/2025-08-18-v2-8-0-migration-guide.md","source":"@site/blog/2025-08-18-v2-8-0-migration-guide.md","title":"v2.8.0 Migration Guide - iOS Field Naming Convention Update","description":"Breaking Changes","date":"2025-08-18T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/blog/tags/release","description":"New version releases and updates"},{"inline":true,"label":"breaking-change","permalink":"/blog/tags/breaking-change"},{"inline":false,"label":"Migration","permalink":"/blog/tags/migration","description":"Migration guides and updates"}],"readingTime":3.65,"hasTruncateMarker":true,"authors":[{"name":"Hyo","title":"Expo IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"v2-8-0-migration-guide","title":"v2.8.0 Migration Guide - iOS Field Naming Convention Update","authors":["hyochan"],"tags":["release","breaking-change","migration"]},"unlisted":false,"prevItem":{"title":"v2.8.1 Release - Type System Improvements","permalink":"/blog/v2-8-1-release"},"nextItem":{"title":"v2.7.3 Release - Google Play Billing Library v8.0.0 Support","permalink":"/blog/v2-7-3-release"}}')},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var s=i(6540);const r={},d=s.createContext(r);function c(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);