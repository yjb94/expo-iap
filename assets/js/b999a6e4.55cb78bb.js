"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[3831],{571:(e,n,i)=>{i.d(n,{A:()=>o});var r=i(6540),s=i(4848);function t({className:e="adfit",style:n,unit:i,height:t,width:o}){return(0,r.useEffect)(()=>{const n=setTimeout(()=>{const n=document.querySelector(`.${e}`);if(!n)return void console.warn(`AdFit: Element with class "${e}" not found`);const r=n.querySelectorAll(".kakao_ad_area"),s=n.querySelectorAll('script[src*="kas/static/ba.min.js"]');r.forEach(e=>e.remove()),s.forEach(e=>e.remove());const c=document.createElement("ins"),a=document.createElement("script");c.className="kakao_ad_area",c.style.cssText="display:none; width:100%;",a.async=!0,a.type="text/javascript",a.src="//t1.daumcdn.net/kas/static/ba.min.js",c.setAttribute("data-ad-width",o.toString()),c.setAttribute("data-ad-height",t.toString()),c.setAttribute("data-ad-unit",i),n.appendChild(c),n.appendChild(a)},100);return()=>clearTimeout(n)},[e,i,t,o]),(0,s.jsx)("div",{style:n,children:(0,s.jsx)("div",{className:e})})}function o(){return(0,s.jsx)(t,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}},8567:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"api/types","title":"Types","description":"This page contains the TypeScript types and interfaces used throughout the expo-iap library.","source":"@site/docs/api/types.md","sourceDirName":"api","slug":"/api/types","permalink":"/docs/api/types","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/docs/api/types.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/docs/api/"},"next":{"title":"Core Methods","permalink":"/docs/api/methods/core-methods"}}');var s=i(4848),t=i(8453),o=i(571);const c={},a="Types",d={},p=[{value:"Core Types",id:"core-types",level:2},{value:"Product",id:"product",level:3},{value:"\u26a0\ufe0f Breaking Change Notice (v2.6+)",id:"\ufe0f-breaking-change-notice-v26",level:3},{value:"Purchase",id:"purchase",level:3},{value:"\u26a0\ufe0f Breaking Change Notice (Unified Purchase Token)",id:"\ufe0f-breaking-change-notice-unified-purchase-token",level:3},{value:"PurchaseState",id:"purchasestate",level:3},{value:"Subscription",id:"subscription",level:3},{value:"Subscription Status Types",id:"subscription-status-types",level:2},{value:"ActiveSubscription",id:"activesubscription",level:3},{value:"Platform-Specific Types",id:"platform-specific-types",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Error Types",id:"error-types",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"types",children:"Types"})}),"\n",(0,s.jsx)(o.A,{}),"\n",(0,s.jsx)(n.p,{children:"This page contains the TypeScript types and interfaces used throughout the expo-iap library."}),"\n",(0,s.jsx)(n.h2,{id:"core-types",children:"Core Types"}),"\n",(0,s.jsx)(n.h3,{id:"product",children:"Product"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ProductType = 'inapp' | 'subs';\ninterface Product {\n  id: string;\n  title: string;\n  description: string;\n  type: ProductType;\n  displayName?: string;\n  displayPrice: string;\n  currency: string;\n  price?: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-breaking-change-notice-v26",children:"\u26a0\ufe0f Breaking Change Notice (v2.6+)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Version 2.6+ Migration"}),": The ",(0,s.jsx)(n.code,{children:"subscription"})," field in ",(0,s.jsx)(n.code,{children:"ProductIOS"})," has changed from a required field to an optional field (",(0,s.jsx)(n.code,{children:"subscription?"}),"). This reflects that not all iOS products have subscription information. Please update your code to handle this field as optional when working with non-subscription products."]}),"\n",(0,s.jsx)(n.p,{children:"iOS product contains additional information:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type SubscriptionIosPeriod = 'DAY' | 'WEEK' | 'MONTH' | 'YEAR' | '';\ntype PaymentMode = '' | 'FREETRIAL' | 'PAYASYOUGO' | 'PAYUPFRONT';\n\ntype ProductIOS = Product & {\n  displayName: string;\n  isFamilyShareable: boolean;\n  jsonRepresentation: string;\n  subscription?: SubscriptionInfo;\n  introductoryPriceNumberOfPeriodsIOS?: string;\n  introductoryPriceSubscriptionPeriodIOS?: SubscriptionIosPeriod;\n};\n\ntype SubscriptionInfo = {\n  introductoryOffer?: SubscriptionOffer;\n  promotionalOffers?: SubscriptionOffer[];\n  subscriptionGroupID: string;\n  subscriptionPeriod: {\n    unit: SubscriptionIosPeriod;\n    value: number;\n  };\n};\n\ntype SubscriptionOffer = {\n  displayPrice: string;\n  id: string;\n  paymentMode: PaymentMode;\n  period: {\n    unit: SubscriptionIosPeriod;\n    value: number;\n  };\n  periodCount: number;\n  price: number;\n  type: 'introductory' | 'promotional';\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"purchase",children:"Purchase"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Purchase {\n  id: string; // Transaction identifier\n  productId: string;\n  transactionId?: string; // @deprecated - use id instead\n  transactionDate: number;\n  transactionReceipt: string;\n  purchaseToken?: string; // Unified purchase token (jwsRepresentation for iOS, purchaseToken for Android)\n  // Platform-specific fields\n  purchaseTokenAndroid?: string; // @deprecated - use purchaseToken instead\n  jwsRepresentationIos?: string; // @deprecated - use purchaseToken instead\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-breaking-change-notice-unified-purchase-token",children:"\u26a0\ufe0f Breaking Change Notice (Unified Purchase Token)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Unified API"}),": Starting from v2.7+, we've introduced a unified ",(0,s.jsx)(n.code,{children:"purchaseToken"})," field that works across both iOS and Android platforms:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"iOS"}),": ",(0,s.jsx)(n.code,{children:"purchaseToken"})," contains the JWS representation (previously ",(0,s.jsx)(n.code,{children:"jwsRepresentationIos"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Android"}),": ",(0,s.jsx)(n.code,{children:"purchaseToken"})," contains the purchase token (previously ",(0,s.jsx)(n.code,{children:"purchaseTokenAndroid"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration Guide:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Old way (platform-specific)\nif (Platform.OS === 'ios') {\n  const token = purchase.jwsRepresentationIos;\n} else {\n  const token = purchase.purchaseTokenAndroid;\n}\n\n// \u2705 New way (unified)\nconst token = purchase.purchaseToken;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The platform-specific fields (",(0,s.jsx)(n.code,{children:"purchaseTokenAndroid"}),", ",(0,s.jsx)(n.code,{children:"jwsRepresentationIos"}),") are now deprecated but still available for backward compatibility."]}),"\n",(0,s.jsx)(n.h3,{id:"purchasestate",children:"PurchaseState"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"enum PurchaseState {\n  PURCHASED = 'PURCHASED',\n  PENDING = 'PENDING',\n  UNSPECIFIED_STATE = 'UNSPECIFIED_STATE',\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"subscription",children:"Subscription"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Subscription {\n  productId: string;\n  purchaseToken: string;\n  isAutoRenewing: boolean;\n  expiryTimeMillis: number;\n  autoResumeTimeMillis?: number;\n  priceCurrencyCode?: string;\n  priceAmountMicros?: number;\n  countryCode?: string;\n  orderId?: string;\n  packageName?: string;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"subscription-status-types",children:"Subscription Status Types"}),"\n",(0,s.jsx)(n.h3,{id:"activesubscription",children:"ActiveSubscription"}),"\n",(0,s.jsx)(n.p,{children:"Represents an active subscription with platform-specific details."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ActiveSubscription {\n  productId: string;\n  isActive: boolean;\n  expirationDateIOS?: Date;\n  autoRenewingAndroid?: boolean;\n  environmentIOS?: string;\n  willExpireSoon?: boolean;\n  daysUntilExpirationIOS?: number;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Platform-Specific Behavior:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"iOS"}),": Provides exact ",(0,s.jsx)(n.code,{children:"expirationDateIOS"}),", ",(0,s.jsx)(n.code,{children:"daysUntilExpirationIOS"}),", and ",(0,s.jsx)(n.code,{children:"environmentIOS"}),' ("Sandbox" | "Production")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Android"}),": Provides ",(0,s.jsx)(n.code,{children:"autoRenewingAndroid"})," status. When ",(0,s.jsx)(n.code,{children:"false"}),", the subscription will not renew"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage with subscription status APIs:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Used as return type for ",(0,s.jsx)(n.code,{children:"getActiveSubscriptions()"})]}),"\n",(0,s.jsxs)(n.li,{children:["Contains ",(0,s.jsx)(n.code,{children:"willExpireSoon"})," flag (true if expiring within 7 days)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"platform-specific-types",children:"Platform-Specific Types"}),"\n",(0,s.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,s.jsxs)(n.p,{children:["For other iOS-specific types and enums, refer to the ",(0,s.jsx)(n.a,{href:"/docs/getting-started/setup-ios",children:"iOS setup guide"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,s.jsxs)(n.p,{children:["For Android-specific types and enums, refer to the ",(0,s.jsx)(n.a,{href:"/docs/getting-started/setup-android",children:"Android setup guide"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"error-types",children:"Error Types"}),"\n",(0,s.jsxs)(n.p,{children:["For error codes and error handling types, see the ",(0,s.jsx)(n.a,{href:"/docs/api/error-codes",children:"Error Codes"})," documentation."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);