<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://expo-iap.hyo.dev/blog</id>
    <title>Expo IAP Blog</title>
    <updated>2025-08-19T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://expo-iap.hyo.dev/blog"/>
    <subtitle>Expo IAP Blog</subtitle>
    <icon>https://expo-iap.hyo.dev/img/favicon.png</icon>
    <entry>
        <title type="html"><![CDATA[v2.8.1 Release - Type System Improvements]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-8-1-release</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-8-1-release"/>
        <updated>2025-08-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This release resolves type mismatches between Product and Purchase types across iOS and Android platforms.]]></summary>
        <content type="html"><![CDATA[<p>This release resolves type mismatches between Product and Purchase types across iOS and Android platforms.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-system-improvements">Type System Improvements<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#type-system-improvements" class="hash-link" aria-label="Direct link to Type System Improvements" title="Direct link to Type System Improvements">​</a></h3>
<ul>
<li>Added <code>platform</code> field to all types for runtime type discrimination</li>
<li>Moved common fields (<code>ids</code>, <code>debugDescription</code>) to shared base types</li>
<li>Fixed iOS native code to populate missing subscription fields</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-breaking-changes">No Breaking Changes<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#no-breaking-changes" class="hash-link" aria-label="Direct link to No Breaking Changes" title="Direct link to No Breaking Changes">​</a></h3>
<p>All existing code continues to work. Update to platform-specific field names before v2.9.0:</p>
<ul>
<li>Android: <code>name</code> → <code>nameAndroid</code></li>
<li>iOS: <code>displayName</code> → <code>displayNameIOS</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-note">Important Note<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#important-note" class="hash-link" aria-label="Direct link to Important Note" title="Direct link to Important Note">​</a></h2>
<p><strong>If upgrading from versions before v2.8.0</strong>, please review the <a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide" target="_blank" rel="noopener noreferrer">v2.8.0 migration guide</a> first, as it contains breaking changes for iOS field naming conventions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-discrimination-example">Type Discrimination Example<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#type-discrimination-example" class="hash-link" aria-label="Direct link to Type Discrimination Example" title="Direct link to Type Discrimination Example">​</a></h2>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Product</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Purchase</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handleProduct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Product</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">platform </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript knows this is ProductIOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isFamilyShareableIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">platform </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'android'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript knows this is ProductAndroid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nameAndroid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.8.1</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="https://expo-iap.hyo.dev/blog/v2-8-1-release#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2>
<p>Deprecated fields will be removed in v2.9.0. Update your code now to ensure smooth migration.</p>
<p>For details, see the <a href="https://github.com/hyochan/expo-iap/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer">full changelog</a>.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="types" term="types"/>
        <category label="iOS" term="iOS"/>
        <category label="Android" term="Android"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[v2.8.0 Migration Guide - iOS Field Naming Convention Update]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide"/>
        <updated>2025-08-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Breaking Changes]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<p>Version 2.8.0 introduces naming convention changes:</p>
<ol>
<li><strong>iOS suffix convention</strong>: Fields with iOS suffixes now use uppercase <code>IOS</code> instead of <code>Ios</code></li>
<li><strong>ID suffix convention</strong>: All fields ending with <code>ID</code> now use <code>Id</code> instead for consistency (e.g., <code>subscriptionGroupID</code> → <code>subscriptionGroupId</code>, <code>bundleID</code> → <code>bundleId</code>)</li>
</ol>
<p><strong>Note:</strong> Android field names remain unchanged as they already follow the correct convention (e.g., <code>autoRenewingAndroid</code>, <code>purchaseTokenAndroid</code>).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-changed">What Changed<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#what-changed" class="hash-link" aria-label="Direct link to What Changed" title="Direct link to What Changed">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ios-changes">iOS Changes<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#ios-changes" class="hash-link" aria-label="Direct link to iOS Changes" title="Direct link to iOS Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product-types">Product Types<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#product-types" class="hash-link" aria-label="Direct link to Product Types" title="Direct link to Product Types">​</a></h3>
<p><strong>ProductIOS &amp; SubscriptionProductIOS:</strong></p>
<ul>
<li><code>displayName</code> - Product display name</li>
<li><code>isFamilyShareable</code> - Family sharing availability</li>
<li><code>jsonRepresentation</code> - JSON representation of product</li>
<li><code>introductoryPriceNumberOfPeriodsIOS</code> - Introductory price period count</li>
<li><code>introductoryPriceSubscriptionPeriodIOS</code> - Introductory price period</li>
<li><code>introductoryPriceAsAmountIOS</code> - Introductory price amount</li>
<li><code>introductoryPricePaymentModeIOS</code> - Introductory price payment mode</li>
<li><code>subscriptionPeriodNumberIOS</code> - Subscription period number</li>
<li><code>subscriptionPeriodUnitIOS</code> - Subscription period unit</li>
</ul>
<p><strong>SubscriptionInfo:</strong></p>
<ul>
<li><code>subscriptionGroupId</code> - Subscription group identifier (changed from <code>subscriptionGroupID</code>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-types">Purchase Types<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#purchase-types" class="hash-link" aria-label="Direct link to Purchase Types" title="Direct link to Purchase Types">​</a></h3>
<p><strong>ProductPurchaseIOS</strong> includes these StoreKit 2 fields:</p>
<ul>
<li><code>quantityIOS</code>, <code>originalTransactionDateIOS</code>, <code>originalTransactionIdentifierIOS</code></li>
<li><code>expirationDateIOS</code>, <code>webOrderLineItemIdIOS</code>, <code>environmentIOS</code></li>
<li><code>storefrontCountryCodeIOS</code>, <code>appBundleIdIOS</code>, <code>productTypeIOS</code></li>
<li><code>subscriptionGroupIdIOS</code>, <code>isUpgradedIOS</code>, <code>ownershipTypeIOS</code></li>
<li><code>reasonIOS</code>, <code>reasonStringRepresentationIOS</code>, <code>transactionReasonIOS</code></li>
<li><code>revocationDateIOS</code>, <code>revocationReasonIOS</code>, <code>offerIOS</code></li>
<li><code>priceIOS</code>, <code>currencyIOS</code>, <code>jwsRepresentationIOS</code> (deprecated)</li>
</ul>
<p><strong>AppTransactionIOS</strong> (iOS 16.0+):</p>
<ul>
<li><code>appTransactionId</code> - App transaction identifier (changed from <code>appTransactionID</code>)</li>
<li><code>bundleId</code> - Bundle identifier (changed from <code>bundleID</code>)</li>
<li><code>appId</code> - App identifier (changed from <code>appID</code>)</li>
<li><code>appVersionId</code> - App version identifier (changed from <code>appVersionID</code>)</li>
</ul>
<p><strong>Breaking Changes - Field Renaming:</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-suffix-changes-ios--ios">iOS Suffix Changes (Ios → IOS)<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#ios-suffix-changes-ios--ios" class="hash-link" aria-label="Direct link to iOS Suffix Changes (Ios → IOS)" title="Direct link to iOS Suffix Changes (Ios → IOS)">​</a></h3>
<table><thead><tr><th>Old Field Name</th><th>New Field Name</th></tr></thead><tbody><tr><td><code>quantityIos</code></td><td><code>quantityIOS</code></td></tr><tr><td><code>originalTransactionDateIos</code></td><td><code>originalTransactionDateIOS</code></td></tr><tr><td><code>originalTransactionIdentifierIos</code></td><td><code>originalTransactionIdentifierIOS</code></td></tr><tr><td><code>appBundleIdIos</code></td><td><code>appBundleIdIOS</code></td></tr><tr><td><code>productTypeIos</code></td><td><code>productTypeIOS</code></td></tr><tr><td><code>subscriptionGroupIdIos</code></td><td><code>subscriptionGroupIdIOS</code></td></tr><tr><td><code>webOrderLineItemIdIos</code></td><td><code>webOrderLineItemIdIOS</code></td></tr><tr><td><code>expirationDateIos</code></td><td><code>expirationDateIOS</code></td></tr><tr><td><code>isUpgradedIos</code></td><td><code>isUpgradedIOS</code></td></tr><tr><td><code>ownershipTypeIos</code></td><td><code>ownershipTypeIOS</code></td></tr><tr><td><code>revocationDateIos</code></td><td><code>revocationDateIOS</code></td></tr><tr><td><code>revocationReasonIos</code></td><td><code>revocationReasonIOS</code></td></tr><tr><td><code>transactionReasonIos</code></td><td><code>transactionReasonIOS</code></td></tr><tr><td><code>environmentIos</code></td><td><code>environmentIOS</code></td></tr><tr><td><code>storefrontCountryCodeIos</code></td><td><code>storefrontCountryCodeIOS</code></td></tr><tr><td><code>reasonIos</code></td><td><code>reasonIOS</code></td></tr><tr><td><code>offerIos</code></td><td><code>offerIOS</code></td></tr><tr><td><code>priceIos</code></td><td><code>priceIOS</code></td></tr><tr><td><code>currencyIos</code></td><td><code>currencyIOS</code></td></tr><tr><td><code>jwsRepresentationIos</code></td><td><code>jwsRepresentationIOS</code></td></tr><tr><td><code>reasonStringRepresentationIos</code></td><td><code>reasonStringRepresentationIOS</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-suffix-changes-id--id">ID Suffix Changes (ID → Id)<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#id-suffix-changes-id--id" class="hash-link" aria-label="Direct link to ID Suffix Changes (ID → Id)" title="Direct link to ID Suffix Changes (ID → Id)">​</a></h3>
<table><thead><tr><th>Old Field Name</th><th>New Field Name</th><th>Type/Context</th></tr></thead><tbody><tr><td><code>subscriptionGroupID</code></td><td><code>subscriptionGroupId</code></td><td>SubscriptionInfo</td></tr><tr><td><code>appTransactionID</code></td><td><code>appTransactionId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>bundleID</code></td><td><code>bundleId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>appID</code></td><td><code>appId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>appVersionID</code></td><td><code>appVersionId</code></td><td>AppTransactionIOS</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-parameter-changes">Function Parameter Changes<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#function-parameter-changes" class="hash-link" aria-label="Direct link to Function Parameter Changes" title="Direct link to Function Parameter Changes">​</a></h3>
<table><thead><tr><th>Function</th><th>Old Parameter</th><th>New Parameter</th></tr></thead><tbody><tr><td><code>isEligibleForIntroOfferIOS</code></td><td><code>groupID</code></td><td><code>groupId</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="android-changes">Android Changes<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#android-changes" class="hash-link" aria-label="Direct link to Android Changes" title="Direct link to Android Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product-types-1">Product Types<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#product-types-1" class="hash-link" aria-label="Direct link to Product Types" title="Direct link to Product Types">​</a></h3>
<p><strong>ProductAndroid &amp; SubscriptionProductAndroid:</strong></p>
<ul>
<li><code>name</code> - Product display name</li>
<li><code>oneTimePurchaseOfferDetails</code> - One-time purchase offer details</li>
<li><code>subscriptionOfferDetails</code> - Subscription offer details array</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-types-1">Purchase Types<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#purchase-types-1" class="hash-link" aria-label="Direct link to Purchase Types" title="Direct link to Purchase Types">​</a></h3>
<p><strong>ProductPurchaseAndroid</strong> includes these Android Billing Library fields:</p>
<ul>
<li><code>ids</code> - Array of product IDs</li>
<li><code>purchaseTokenAndroid</code> - Android purchase token (deprecated, use <code>purchaseToken</code>)</li>
<li><code>dataAndroid</code> - Purchase data</li>
<li><code>signatureAndroid</code> - Purchase signature</li>
<li><code>autoRenewingAndroid</code> - Auto-renewal status</li>
<li><code>purchaseStateAndroid</code> - Purchase state enum</li>
<li><code>isAcknowledgedAndroid</code> - Acknowledgment status</li>
<li><code>packageNameAndroid</code> - App package name</li>
<li><code>developerPayloadAndroid</code> - Developer payload</li>
<li><code>obfuscatedAccountIdAndroid</code> - Obfuscated account ID</li>
<li><code>obfuscatedProfileIdAndroid</code> - Obfuscated profile ID</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-props">Request Props<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#request-props" class="hash-link" aria-label="Direct link to Request Props" title="Direct link to Request Props">​</a></h3>
<p><strong>RequestPurchaseAndroidProps:</strong></p>
<ul>
<li><code>isOfferPersonalized</code> - For Android Billing V5 personalized pricing</li>
</ul>
<p><strong>No Breaking Changes</strong> - All Android fields maintain existing naming convention.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-migrate">How to Migrate<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#how-to-migrate" class="hash-link" aria-label="Direct link to How to Migrate" title="Direct link to How to Migrate">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-update-field-references">Step 1: Update Field References<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#step-1-update-field-references" class="hash-link" aria-label="Direct link to Step 1: Update Field References" title="Direct link to Step 1: Update Field References">​</a></h3>
<p>Search your codebase for any references to the old field names and update them:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Expires:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note: requestPurchase API signature has also changed in v2.8.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'inapp'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Expires:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-update-type-imports-and-declarations">Step 2: Update Type Imports and Declarations<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#step-2-update-type-imports-and-declarations" class="hash-link" aria-label="Direct link to Step 2: Update Type Imports and Declarations" title="Direct link to Step 2: Update Type Imports and Declarations">​</a></h3>
<p>Type names have also been updated to use uppercase <code>IOS</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductPurchaseIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SubscriptionProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductStatusIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductPurchaseIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SubscriptionProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductStatusIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> The old type names are still available as deprecated aliases for backward compatibility, but we recommend updating to the new names.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-update-type-checks">Step 3: Update Type Checks<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#step-3-update-type-checks" class="hash-link" aria-label="Direct link to Step 3: Update Type Checks" title="Direct link to Step 3: Update Type Checks">​</a></h3>
<p>If you're using TypeScript and checking for iOS-specific fields:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'expirationDateIos'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'expirationDateIOS'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-update-id-field-references">Step 4: Update ID Field References<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#step-4-update-id-field-references" class="hash-link" aria-label="Direct link to Step 4: Update ID Field References" title="Direct link to Step 4: Update ID Field References">​</a></h3>
<p>Update all ID field references to use <code>Id</code> instead:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bundleID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bundleId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-update-subscription-helpers">Step 5: Update Subscription Helpers<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#step-5-update-subscription-helpers" class="hash-link" aria-label="Direct link to Step 5: Update Subscription Helpers" title="Direct link to Step 5: Update Subscription Helpers">​</a></h3>
<p>If you're using the subscription helper functions:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expirationDateIos</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environmentIos</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expirationDateIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environmentIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-migration-script">Quick Migration Script<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#quick-migration-script" class="hash-link" aria-label="Direct link to Quick Migration Script" title="Direct link to Quick Migration Script">​</a></h2>
<p>You can use this regex find/replace pattern in your IDE to quickly update most occurrences:</p>
<p><strong>Find Pattern (Regex):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\b(\w+)(Ios)\b</span><br></span></code></pre></div></div>
<p><strong>Replace Pattern:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$1IOS</span><br></span></code></pre></div></div>
<p>⚠️ <strong>Note:</strong> Review each replacement carefully as this might affect non-field references.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-change">Why This Change?<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#why-this-change" class="hash-link" aria-label="Direct link to Why This Change?" title="Direct link to Why This Change?">​</a></h2>
<p>These changes align with widely-adopted naming conventions:</p>
<ol>
<li><strong>iOS suffix</strong>: Acronyms at the end of identifiers are written in uppercase (e.g., <code>dataIOS</code>, <code>configIOS</code>)</li>
<li><strong>ID suffix</strong>: The <code>Id</code> convention is more common in modern JavaScript/TypeScript codebases (e.g., <code>userId</code>, <code>productId</code>, <code>transactionId</code>)</li>
</ol>
<p>This makes the codebase more consistent and follows best practices in the TypeScript/JavaScript ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="need-help">Need Help?<a href="https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide#need-help" class="hash-link" aria-label="Direct link to Need Help?" title="Direct link to Need Help?">​</a></h2>
<p>If you encounter any issues during migration:</p>
<ul>
<li>Check our <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></li>
<li>Join our <a href="https://hyo.dev/joinSlack" target="_blank" rel="noopener noreferrer">Slack community</a></li>
<li>Review the <a href="https://expo-iap.hyo.dev/" target="_blank" rel="noopener noreferrer">full documentation</a></li>
</ul>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="breaking-change" term="breaking-change"/>
        <category label="Migration" term="Migration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[v2.7.3 Release - Google Play Billing Library v8.0.0 Support]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-7-3-release</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-7-3-release"/>
        <updated>2025-07-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release of expo-iap v2.7.3, which brings full support for Google Play Billing Library v8.0.0! This update ensures compatibility with the latest Android billing features and improved error handling.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce the release of expo-iap v2.7.3, which brings full support for Google Play Billing Library v8.0.0! This update ensures compatibility with the latest Android billing features and improved error handling.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-new">🚀 What's New<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#-whats-new" class="hash-link" aria-label="Direct link to 🚀 What's New" title="Direct link to 🚀 What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="google-play-billing-library-v800-support">Google Play Billing Library v8.0.0 Support<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#google-play-billing-library-v800-support" class="hash-link" aria-label="Direct link to Google Play Billing Library v8.0.0 Support" title="Direct link to Google Play Billing Library v8.0.0 Support">​</a></h3>
<ul>
<li><strong>Upgraded billing library</strong> from v7.0.0 to v8.0.0</li>
<li><strong>Enhanced error handling</strong> with sub-response codes for better debugging</li>
<li><strong>Improved API compatibility</strong> with updated callback signatures</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-changes">Key Changes<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#key-changes" class="hash-link" aria-label="Direct link to Key Changes" title="Direct link to Key Changes">​</a></h3>
<ul>
<li>Updated <code>queryProductDetailsAsync</code> callback to use <code>QueryProductDetailsResult</code></li>
<li>Enhanced <code>enablePendingPurchases</code> with proper parameter configuration</li>
<li>Removed deprecated hardcoded Kotlin version constraints</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-breaking-changes">⚠️ Breaking Changes<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#%EF%B8%8F-breaking-changes" class="hash-link" aria-label="Direct link to ⚠️ Breaking Changes" title="Direct link to ⚠️ Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-kotlin-version-requirement">Android Kotlin Version Requirement<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#android-kotlin-version-requirement" class="hash-link" aria-label="Direct link to Android Kotlin Version Requirement" title="Direct link to Android Kotlin Version Requirement">​</a></h3>
<p><strong>Important:</strong> Google Play Billing Library v8.0.0 requires Kotlin 2.0+, but <code>expo-modules-core</code> doesn't support Kotlin v2 yet. You need to configure your project with <code>expo-build-properties</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"expo"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"plugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"expo-build-properties"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"android"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"kotlinVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2.0.21"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<p>If you're upgrading to v2.7.3:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx expo install expo-iap@2.7.3</span><br></span></code></pre></div></div>
<p>Don't forget to add the <code>expo-build-properties</code> configuration to your <code>app.json</code> if you haven't already!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-migration-guide">🔧 Migration Guide<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#-migration-guide" class="hash-link" aria-label="Direct link to 🔧 Migration Guide" title="Direct link to 🔧 Migration Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-existing-projects">For Existing Projects<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#for-existing-projects" class="hash-link" aria-label="Direct link to For Existing Projects" title="Direct link to For Existing Projects">​</a></h3>
<ol>
<li>Update to expo-iap v2.7.3</li>
<li>Add <code>expo-build-properties</code> plugin configuration to your <code>app.json</code></li>
<li>Run <code>npx expo prebuild --clean</code> to regenerate native code</li>
<li>Test your purchase flows to ensure everything works correctly</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-change">Why This Change?<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#why-this-change" class="hash-link" aria-label="Direct link to Why This Change?" title="Direct link to Why This Change?">​</a></h3>
<p>Google Play Billing Library v8.0.0 introduces several improvements:</p>
<ul>
<li>Better error handling with detailed sub-response codes</li>
<li>Enhanced product fetching with unfetched product tracking</li>
<li>Improved security and performance</li>
</ul>
<p>However, it requires Kotlin 2.0+, which conflicts with expo-modules-core's current Kotlin version requirements. The expo-build-properties solution provides a clean workaround until expo-modules-core supports Kotlin v2.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation-updates">📚 Documentation Updates<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#-documentation-updates" class="hash-link" aria-label="Direct link to 📚 Documentation Updates" title="Direct link to 📚 Documentation Updates">​</a></h2>
<p>We've updated our documentation to include:</p>
<ul>
<li>Android configuration section with step-by-step setup</li>
<li>Kotlin version requirement explanation</li>
<li>expo-build-properties configuration guide</li>
</ul>
<p>Visit our <a href="https://expo-iap.hyo.dev/docs/installation" target="_blank" rel="noopener noreferrer">installation guide</a> for complete setup instructions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-acknowledgments">🙏 Acknowledgments<a href="https://expo-iap.hyo.dev/blog/v2-7-3-release#-acknowledgments" class="hash-link" aria-label="Direct link to 🙏 Acknowledgments" title="Direct link to 🙏 Acknowledgments">​</a></h2>
<p>Thanks to the community for reporting the billing library compatibility issues and helping us test the Kotlin version solutions. Your feedback makes expo-iap better for everyone!</p>
<hr>
<p>As always, if you encounter any issues or have feedback, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a> on GitHub.</p>
<p>Happy coding! 🎉</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Android" term="Android"/>
        <category label="billing" term="billing"/>
        <category label="kotlin" term="kotlin"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.7.0 - New Platform API & Google Play Billing v8]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-7-0-release</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-7-0-release"/>
        <updated>2025-07-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce expo-iap v2.7.0! This release includes a cleaner platform-specific API for handling purchases and full support for Google Play Billing Library v8.0.0.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce expo-iap v2.7.0! This release includes a cleaner platform-specific API for handling purchases and full support for Google Play Billing Library v8.0.0.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-new-platform-specific-api">🎯 New Platform-Specific API<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-new-platform-specific-api" class="hash-link" aria-label="Direct link to 🎯 New Platform-Specific API" title="Direct link to 🎯 New Platform-Specific API">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem">The Problem<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#the-problem" class="hash-link" aria-label="Direct link to The Problem" title="Direct link to The Problem">​</a></h3>
<p>Previously, developers had to write conditional logic to handle platform differences:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old approach - requires platform checks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This approach had several issues:</p>
<ul>
<li>Required manual platform checks</li>
<li>Easy to miss platform-specific parameters</li>
<li>TypeScript couldn't provide proper platform-specific type hints</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-solution-platform-specific-parameters">The Solution: Platform-Specific Parameters<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#the-solution-platform-specific-parameters" class="hash-link" aria-label="Direct link to The Solution: Platform-Specific Parameters" title="Direct link to The Solution: Platform-Specific Parameters">​</a></h3>
<p>The new API introduces a cleaner structure with explicit platform parameters:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// New approach - clear platform separation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      obfuscatedAccountIdAndroid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-benefits">Key Benefits<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#key-benefits" class="hash-link" aria-label="Direct link to Key Benefits" title="Direct link to Key Benefits">​</a></h3>
<ol>
<li><strong>Better Type Safety</strong>: TypeScript now provides accurate autocompletion for each platform's specific parameters</li>
<li><strong>Clearer Code Structure</strong>: Platform-specific logic is clearly separated</li>
<li><strong>Backward Compatibility</strong>: The old API still works, so you can migrate at your own pace</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-examples">Migration Examples<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#migration-examples" class="hash-link" aria-label="Direct link to Migration Examples" title="Direct link to Migration Examples">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-product-purchase">Basic Product Purchase<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#basic-product-purchase" class="hash-link" aria-label="Direct link to Basic Product Purchase" title="Direct link to Basic Product Purchase">​</a></h4>
<p><strong>Before:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buyProduct</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buyProduct</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subscription-purchase">Subscription Purchase<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#subscription-purchase" class="hash-link" aria-label="Direct link to Subscription Purchase" title="Direct link to Subscription Purchase">​</a></h4>
<p><strong>Before:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buySubscription</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscriptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> offer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscription</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">subscriptionOfferDetails</span><span class="token operator" style="color:#393A34">?.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscriptionOffers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> offer</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">offerToken </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buySubscription</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscriptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscriptionOffers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          subscription</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">subscriptionOfferDetails</span><span class="token operator" style="color:#393A34">?.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">offerToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="platform-specific-parameters">Platform-Specific Parameters<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#platform-specific-parameters" class="hash-link" aria-label="Direct link to Platform-Specific Parameters" title="Direct link to Platform-Specific Parameters">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ios-parameters">iOS Parameters<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#ios-parameters" class="hash-link" aria-label="Direct link to iOS Parameters" title="Direct link to iOS Parameters">​</a></h4>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                        </span><span class="token comment" style="color:#999988;font-style:italic">// Required: Product SKU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    andDangerouslyFinishTransactionAutomatically</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    appAccountToken</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic">// For server validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                  </span><span class="token comment" style="color:#999988;font-style:italic">// For bulk purchases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withOffer</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PaymentDiscount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// For discounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="android-parameters">Android Parameters<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#android-parameters" class="hash-link" aria-label="Direct link to Android Parameters" title="Direct link to Android Parameters">​</a></h4>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                     </span><span class="token comment" style="color:#999988;font-style:italic">// Required: Product SKUs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obfuscatedAccountIdAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// User identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obfuscatedProfileIdAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// Profile identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isOfferPersonalized</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// For personalized pricing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// For subscriptions only:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subscriptionOffers</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    purchaseTokenAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// For upgrades/downgrades</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replacementModeAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// Proration mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-deprecation-notice-requestsubscription">🔄 Deprecation Notice: requestSubscription<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-deprecation-notice-requestsubscription" class="hash-link" aria-label="Direct link to 🔄 Deprecation Notice: requestSubscription" title="Direct link to 🔄 Deprecation Notice: requestSubscription">​</a></h2>
<p>Starting from v2.7.0, <code>requestSubscription</code> is deprecated in favor of using <code>requestPurchase</code> with <code>type: 'subs'</code>. This unifies our API and makes the codebase cleaner.</p>
<p><strong>Migration example:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old way (deprecated)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subscriptionId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subscriptionId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// New way (recommended)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subscriptionId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subscriptionId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-google-play-billing-library-v800-support">🤖 Google Play Billing Library v8.0.0 Support<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-google-play-billing-library-v800-support" class="hash-link" aria-label="Direct link to 🤖 Google Play Billing Library v8.0.0 Support" title="Direct link to 🤖 Google Play Billing Library v8.0.0 Support">​</a></h2>
<p>We've updated to Google Play Billing Library v8.0.0 to meet Google Play's latest requirements. For more details on the migration, see <a href="https://developer.android.com/google/play/billing/migrate-gpblv8" target="_blank" rel="noopener noreferrer">Google's official migration guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-changes">Key Changes<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#key-changes" class="hash-link" aria-label="Direct link to Key Changes" title="Direct link to Key Changes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-updated-dependencies">1. Updated Dependencies<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#1-updated-dependencies" class="hash-link" aria-label="Direct link to 1. Updated Dependencies" title="Direct link to 1. Updated Dependencies">​</a></h4>
<p>The Android module now uses the latest Google Play Billing Library:</p>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">implementation "com.android.billingclient:billing-ktx:8.0.0"</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-removed-deprecated-methods">2. Removed Deprecated Methods<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#2-removed-deprecated-methods" class="hash-link" aria-label="Direct link to 2. Removed Deprecated Methods" title="Direct link to 2. Removed Deprecated Methods">​</a></h4>
<blockquote>
<p>getPurchaseHistory is no longer available on Android</p>
</blockquote>
<p>Google Play Billing Library v8 has removed the <code>queryPurchaseHistoryAsync()</code> method. The <code>getPurchaseHistories()</code> function will now return an empty array on Android with a console warning:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before v8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Returns purchase history</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After v8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Returns [] on Android with warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Use getAvailablePurchases() instead for active purchases</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-automatic-service-reconnection">3. Automatic Service Reconnection<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#3-automatic-service-reconnection" class="hash-link" aria-label="Direct link to 3. Automatic Service Reconnection" title="Direct link to 3. Automatic Service Reconnection">​</a></h4>
<p>The library now includes automatic service reconnection support, improving reliability when the billing service disconnects unexpectedly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-sub-response-codes">4. Sub-Response Codes<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#4-sub-response-codes" class="hash-link" aria-label="Direct link to 4. Sub-Response Codes" title="Direct link to 4. Sub-Response Codes">​</a></h4>
<p>The library now provides more detailed error information through sub-response codes:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Error object now includes sub-response codes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">responseCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ERROR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">debugMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Error processing purchase"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">subResponseCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// PAYMENT_DECLINED_DUE_TO_INSUFFICIENT_FUNDS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">subResponseMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Payment declined due to insufficient funds"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-summary">Breaking Changes Summary<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#breaking-changes-summary" class="hash-link" aria-label="Direct link to Breaking Changes Summary" title="Direct link to Breaking Changes Summary">​</a></h3>
<ol>
<li><strong><code>getPurchaseHistory()</code> removed</strong> - Use <code>getAvailablePurchases()</code> instead</li>
<li><strong><code>querySkuDetailsAsync()</code> removed</strong> - Already migrated to <code>queryProductDetailsAsync()</code></li>
<li><strong><code>enablePendingPurchases()</code> signature changed</strong> - Now requires <code>PendingPurchasesParams</code></li>
<li><strong><code>queryPurchasesAsync(skuType)</code> removed</strong> - Use <code>queryPurchasesAsync(QueryPurchasesParams)</code> instead</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-guide-for-getpurchasehistory">Migration Guide for getPurchaseHistory<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#migration-guide-for-getpurchasehistory" class="hash-link" aria-label="Direct link to Migration Guide for getPurchaseHistory" title="Direct link to Migration Guide for getPurchaseHistory">​</a></h3>
<p>If you're using <code>getPurchaseHistory()</code> or <code>getPurchaseHistories()</code> on Android:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old approach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// New approach - use getAvailablePurchases for active purchases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> activePurchases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-best-practices">🚀 Best Practices<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-best-practices" class="hash-link" aria-label="Direct link to 🚀 Best Practices" title="Direct link to 🚀 Best Practices">​</a></h2>
<ol>
<li>
<p><strong>Handle Platform Availability</strong>: Not all parameters need to be set for both platforms</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Use TypeScript</strong>: Let TypeScript guide you with autocompletion</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript will show iOS-specific options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript will show Android-specific options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Gradual Migration</strong>: The old API still works, migrate at your own pace</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-upgrading">📦 Upgrading<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-upgrading" class="hash-link" aria-label="Direct link to 📦 Upgrading" title="Direct link to 📦 Upgrading">​</a></h2>
<p>To upgrade to version 2.7.0:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@2.7.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3>
<ul>
<li>Android Gradle Plugin 4.0 or higher</li>
<li>Kotlin 1.6 or higher</li>
<li>JVM target 17 (automatically configured)</li>
<li>Google Play's latest billing requirements (deadline: August 31, 2025)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-benefits">🎉 Benefits<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-benefits" class="hash-link" aria-label="Direct link to 🎉 Benefits" title="Direct link to 🎉 Benefits">​</a></h2>
<ul>
<li><strong>Cleaner Code</strong>: No more Platform.OS checks in your purchase logic</li>
<li><strong>Better Type Safety</strong>: Platform-specific TypeScript hints</li>
<li><strong>Future-Proof</strong>: Compliance with Google Play's latest requirements</li>
<li><strong>Improved Reliability</strong>: Automatic service reconnection on Android</li>
<li><strong>Enhanced Error Handling</strong>: Detailed sub-response codes</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation">📚 Documentation<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-documentation" class="hash-link" aria-label="Direct link to 📚 Documentation" title="Direct link to 📚 Documentation">​</a></h2>
<ul>
<li>Check our <a href="https://expo-iap.hyo.dev/docs/guides/purchases">updated documentation</a></li>
<li>View <a href="https://github.com/hyochan/expo-iap/tree/main/example" target="_blank" rel="noopener noreferrer">complete examples</a></li>
<li>Join our <a href="https://github.com/hyochan/expo-iap/discussions" target="_blank" rel="noopener noreferrer">community discussions</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-feedback">💬 Feedback<a href="https://expo-iap.hyo.dev/blog/v2-7-0-release#-feedback" class="hash-link" aria-label="Direct link to 💬 Feedback" title="Direct link to 💬 Feedback">​</a></h2>
<p>If you encounter any issues with this update, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a> on our GitHub repository.</p>
<p>Happy coding! 🚀</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="API" term="API"/>
        <category label="Breaking Changes" term="Breaking Changes"/>
        <category label="Android" term="Android"/>
        <category label="Google Play Billing" term="Google Play Billing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.6.3 - iOS AppTransaction Support]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-6-3-release</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-6-3-release"/>
        <updated>2025-07-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release of expo-iap version 2.6.3, which includes critical fixes for iOS AppTransaction functionality.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce the release of expo-iap version 2.6.3, which includes critical fixes for iOS AppTransaction functionality.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-apptransaction-properties">Complete AppTransaction Properties<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#complete-apptransaction-properties" class="hash-link" aria-label="Direct link to Complete AppTransaction Properties" title="Direct link to Complete AppTransaction Properties">​</a></h3>
<p>The <code>getAppTransactionIOS()</code> function now returns all properties available from Apple's StoreKit 2 AppTransaction API:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">AppTransactionIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appTransactionID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bundleID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appVersion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalAppVersion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalPurchaseDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deviceVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deviceVerificationNonce</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  signedDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appID</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appVersionID</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalPlatform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  preorderDate</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-properties-added">Key Properties Added<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#key-properties-added" class="hash-link" aria-label="Direct link to Key Properties Added" title="Direct link to Key Properties Added">​</a></h3>
<ul>
<li><strong><code>appTransactionID</code></strong>: The unique identifier for the app transaction</li>
<li><strong><code>environment</code></strong>: Indicates whether the transaction occurred in Production, Sandbox, or Xcode environment</li>
<li><strong><code>signedDate</code></strong>: The date when the transaction was signed</li>
<li><strong><code>appID</code></strong> and <strong><code>appVersionID</code></strong>: App Store identifiers for the app and version</li>
<li><strong><code>originalPlatform</code></strong>: The platform where the app was originally purchased</li>
<li><strong><code>preorderDate</code></strong>: Available when the app was pre-ordered</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example">Usage Example<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#usage-example" class="hash-link" aria-label="Direct link to Usage Example" title="Direct link to Usage Example">​</a></h2>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getAppPurchaseInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'App Transaction ID:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appTransactionID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Environment:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environment</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'Original Purchase Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">originalPurchaseDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Check if app was pre-ordered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">preorderDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Pre-order Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">preorderDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Failed to get app transaction:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-matters">Why This Matters<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#why-this-matters" class="hash-link" aria-label="Direct link to Why This Matters" title="Direct link to Why This Matters">​</a></h2>
<p>The AppTransaction API provides crucial information about the app's purchase and installation:</p>
<ul>
<li><strong>Verify app authenticity</strong>: Use the device verification data to ensure the app is legitimate</li>
<li><strong>Track installation source</strong>: Determine if the app was purchased, redeemed, or installed via TestFlight</li>
<li><strong>Environment detection</strong>: Easily identify if you're running in production or sandbox</li>
<li><strong>Pre-order support</strong>: Handle pre-ordered apps appropriately</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<ul>
<li>iOS 16.0 or later</li>
<li>The function will throw an error on older iOS versions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<p>This release also includes:</p>
<ul>
<li>Fixed missing properties in AppTransaction type definition</li>
<li>Corrected property names to match Apple's API exactly</li>
<li>Fixed TypeScript type exports</li>
<li>Fixed iOS build errors for <code>appTransactionID</code> and <code>preorderDate</code> mapping</li>
<li>Made <code>originalPlatform</code> optional as it's only available in iOS 18.4+</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading">Upgrading<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#upgrading" class="hash-link" aria-label="Direct link to Upgrading" title="Direct link to Upgrading">​</a></h2>
<p>To upgrade to version 2.6.3:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.6.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.6.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@2.6.3</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#whats-next" class="hash-link" aria-label="Direct link to What's Next" title="Direct link to What's Next">​</a></h2>
<p>We're continuing to improve the iOS integration and will be adding more StoreKit 2 features in upcoming releases. Stay tuned!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="feedback">Feedback<a href="https://expo-iap.hyo.dev/blog/v2-6-3-release#feedback" class="hash-link" aria-label="Direct link to Feedback" title="Direct link to Feedback">​</a></h2>
<p>If you encounter any issues or have suggestions, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a> on our GitHub repository.</p>
<p>Happy coding! 🚀</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="iOS" term="iOS"/>
        <category label="App Transaction" term="App Transaction"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.6.0 - Major iOS Improvements]]></title>
        <id>https://expo-iap.hyo.dev/blog/v2-6-0-release</id>
        <link href="https://expo-iap.hyo.dev/blog/v2-6-0-release"/>
        <updated>2025-07-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release of expo-iap v2.6.0! This release brings significant improvements to iOS functionality, better TypeScript support, and enhanced developer experience.]]></summary>
        <content type="html"><![CDATA[<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<p>We're excited to announce the release of expo-iap v2.6.0! This release brings significant improvements to iOS functionality, better TypeScript support, and enhanced developer experience.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-new">🎉 What's New<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-whats-new" class="hash-link" aria-label="Direct link to 🎉 What's New" title="Direct link to 🎉 What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-proper-ios-subscription-data-serialization">1. Proper iOS Subscription Data Serialization<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#1-proper-ios-subscription-data-serialization" class="hash-link" aria-label="Direct link to 1. Proper iOS Subscription Data Serialization" title="Direct link to 1. Proper iOS Subscription Data Serialization">​</a></h3>
<p>The biggest improvement in this release is the proper serialization of iOS subscription data. Previously, the <code>subscription</code> field would return undefined for subscription products. Now, all subscription information is properly serialized and accessible.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="before-v25x">Before (v2.5.x)<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#before-v25x" class="hash-link" aria-label="Direct link to Before (v2.5.x)" title="Direct link to Before (v2.5.x)">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSubscriptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'com.example.premium'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscriptions</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// undefined 😢</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="after-v260">After (v2.6.0)<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#after-v260" class="hash-link" aria-label="Direct link to After (v2.6.0)" title="Direct link to After (v2.6.0)">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSubscriptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'com.example.premium'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscriptions</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ✅ Full subscription data!</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-improved-type-structure">2. Improved Type Structure<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#2-improved-type-structure" class="hash-link" aria-label="Direct link to 2. Improved Type Structure" title="Direct link to 2. Improved Type Structure">​</a></h3>
<p>We've restructured how period information is returned to be more consistent and useful. The <code>period</code> and <code>subscriptionPeriod</code> properties now return objects with <code>unit</code> and <code>value</code> properties instead of just the unit string.</p>
<p><strong>Before (v2.5.x):</strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">SubscriptionInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscriptionPeriod</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionIosPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After (v2.6.0):</strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">SubscriptionInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscriptionPeriod</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionIosPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// e.g., 1, 3, 6, 12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This change provides more detailed information about subscription periods. For example, instead of just knowing a subscription is "MONTH", you now know if it's "1 MONTH", "3 MONTHS", etc.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-new-getstorefront-api">3. New getStorefront() API<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#3-new-getstorefront-api" class="hash-link" aria-label="Direct link to 3. New getStorefront() API" title="Direct link to 3. New getStorefront() API">​</a></h3>
<p>Get the user's App Store country code:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getStorefront</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> countryCode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getStorefront</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'User storefront:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> countryCode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'US', 'GB', 'JP', etc.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-apptransaction-support-ios-160">4. AppTransaction Support (iOS 16.0+)<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#4-apptransaction-support-ios-160" class="hash-link" aria-label="Direct link to 4. AppTransaction Support (iOS 16.0+)" title="Direct link to 4. AppTransaction Support (iOS 16.0+)">​</a></h3>
<p>For premium apps or apps that were previously paid, you can now verify the initial app purchase:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getAppTransaction</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'App Transaction ID:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appTransactionID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Purchase Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">originalPurchaseDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Send deviceVerification to your server for validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-comprehensive-ios-subscription-offers-documentation">5. Comprehensive iOS Subscription Offers Documentation<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#5-comprehensive-ios-subscription-offers-documentation" class="hash-link" aria-label="Direct link to 5. Comprehensive iOS Subscription Offers Documentation" title="Direct link to 5. Comprehensive iOS Subscription Offers Documentation">​</a></h3>
<p>We've added extensive documentation for handling iOS subscription offers:</p>
<ul>
<li>Understanding introductory and promotional offers</li>
<li>Checking user eligibility</li>
<li>Implementing offer UI</li>
<li>Best practices and troubleshooting</li>
</ul>
<p>Check out the new <a href="https://expo-iap.hyo.dev/docs/guides/ios-subscription-offers">iOS Subscription Offers Guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-breaking-changes">⚠️ Breaking Changes<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#%EF%B8%8F-breaking-changes" class="hash-link" aria-label="Direct link to ⚠️ Breaking Changes" title="Direct link to ⚠️ Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-period-structure-changes">1. Period Structure Changes<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#1-period-structure-changes" class="hash-link" aria-label="Direct link to 1. Period Structure Changes" title="Direct link to 1. Period Structure Changes">​</a></h3>
<p>The <code>period</code> and <code>subscriptionPeriod</code> properties now return objects with <code>unit</code> and <code>value</code> properties:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MONTH'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Monthly offer'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MONTH'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">offer</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">period</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> month(s) offer</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-optional-subscription-field">2. Optional Subscription Field<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#2-optional-subscription-field" class="hash-link" aria-label="Direct link to 2. Optional Subscription Field" title="Direct link to 2. Optional Subscription Field">​</a></h3>
<p>The <code>subscription</code> field in <code>ProductIOS</code> is now optional to reflect that not all iOS products have subscription information:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscription</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Always required</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscription</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Optional - only present for subscriptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Migration:</strong> Update your code to handle the optional subscription field:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Check if product is a subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription-specific logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Period:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-method-naming-update">3. Method Naming Update<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#3-method-naming-update" class="hash-link" aria-label="Direct link to 3. Method Naming Update" title="Direct link to 3. Method Naming Update">​</a></h3>
<p>To improve consistency, we've updated the purchase history method naming:</p>
<ul>
<li><strong>Deprecated</strong>: <code>getPurchaseHistory()</code> (singular)</li>
<li><strong>New</strong>: <code>getPurchaseHistories()</code> (plural)</li>
</ul>
<p>The <code>useIAP</code> hook already uses the plural form:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">purchaseHistories</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useIAP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-complete-example">📋 Complete Example<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-complete-example" class="hash-link" aria-label="Direct link to 📋 Complete Example" title="Direct link to 📋 Complete Example">​</a></h2>
<p>Here's a complete example showing how to work with the new types:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">useIAP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProductList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">products</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useIAP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">products</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">displayName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">localizedPrice</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Subscription Period</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  Intro Offer</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">displayPrice</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-bug-fixes">🐛 Bug Fixes<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-bug-fixes" class="hash-link" aria-label="Direct link to 🐛 Bug Fixes" title="Direct link to 🐛 Bug Fixes">​</a></h2>
<ul>
<li>Fixed iOS subscription data not being properly serialized</li>
<li>Fixed period information returning raw values instead of structured data</li>
<li>Improved error handling for platform-specific methods</li>
<li>Fixed inconsistent naming between <code>getPurchaseHistory</code> and <code>purchaseHistories</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation-updates">📚 Documentation Updates<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-documentation-updates" class="hash-link" aria-label="Direct link to 📚 Documentation Updates" title="Direct link to 📚 Documentation Updates">​</a></h2>
<ul>
<li>Added iOS Subscription Offers guide</li>
<li>Updated type definitions documentation</li>
<li>Added examples for new APIs</li>
<li>Improved troubleshooting section</li>
<li>Updated migration guide for naming consistency</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-benefits">💪 Benefits<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-benefits" class="hash-link" aria-label="Direct link to 💪 Benefits" title="Direct link to 💪 Benefits">​</a></h2>
<p>These improvements provide several benefits:</p>
<ol>
<li><strong>Better Type Safety</strong>: The TypeScript compiler can now catch more potential errors at compile time</li>
<li><strong>More Accurate Data</strong>: Period information now includes both unit and value, providing complete subscription duration details</li>
<li><strong>Clearer Intent</strong>: Optional types make it explicit which products are subscriptions</li>
<li><strong>Consistent API</strong>: Naming conventions are now consistent throughout the library</li>
<li><strong>Future-Proof</strong>: These changes align better with Apple's StoreKit 2 data structures</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-acknowledgments">🙏 Acknowledgments<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-acknowledgments" class="hash-link" aria-label="Direct link to 🙏 Acknowledgments" title="Direct link to 🙏 Acknowledgments">​</a></h2>
<p>Special thanks to:</p>
<ul>
<li><a href="https://github.com/Navipro70" target="_blank" rel="noopener noreferrer">@Navipro70</a> for identifying the subscription serialization issue and providing valuable feedback</li>
<li><a href="https://github.com/matthieuMay" target="_blank" rel="noopener noreferrer">@matthieuMay</a> for the initial iOS type improvements</li>
<li>All contributors who helped test and improve this release</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<p>Update to the latest version:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.6.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.6.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-links">🔗 Links<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#-links" class="hash-link" aria-label="Direct link to 🔗 Links" title="Direct link to 🔗 Links">​</a></h2>
<ul>
<li><a href="https://github.com/hyochan/expo-iap/releases/tag/v2.6.0" target="_blank" rel="noopener noreferrer">Full Changelog</a></li>
<li><a href="https://expo-iap.hyo.dev/docs/guides/ios-subscription-offers">iOS Subscription Offers Guide</a></li>
<li><a href="https://expo-iap.hyo.dev/docs/api/methods/core-methods">API Reference</a></li>
<li><a href="https://expo-iap.hyo.dev/docs/guides/migration">Migration Guide</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next?<a href="https://expo-iap.hyo.dev/blog/v2-6-0-release#whats-next" class="hash-link" aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2>
<p>We're working on:</p>
<ul>
<li>Android subscription offers improvements</li>
<li>Better error messages and debugging tools</li>
<li>Performance optimizations</li>
<li>More comprehensive examples</li>
</ul>
<p>Stay tuned for more updates! If you have any feedback or suggestions, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a>.</p>
<p>Happy coding! 🚀</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="iOS" term="iOS"/>
        <category label="TypeScript" term="TypeScript"/>
        <category label="Breaking Changes" term="Breaking Changes"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Welcome to Expo IAP Documentation]]></title>
        <id>https://expo-iap.hyo.dev/blog/welcome-to-expo-iap</id>
        <link href="https://expo-iap.hyo.dev/blog/welcome-to-expo-iap"/>
        <updated>2025-06-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Welcome to the official documentation site for Expo IAP! 🎉]]></summary>
        <content type="html"><![CDATA[<p>Welcome to the official documentation site for <strong>Expo IAP</strong>! 🎉</p>
<p>We're excited to share this comprehensive resource for developers looking to implement in-app purchases in their Expo and React Native applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://expo-iap.hyo.dev/blog/welcome-to-expo-iap#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h2>
<p>This documentation site features:</p>
<ul>
<li><strong>🚀 Quick Start Guide</strong> - Get up and running in 5 minutes</li>
<li><strong>📱 Platform-specific Setup</strong> - Detailed guides for iOS and Android</li>
<li><strong>🎣 useIAP Hook API</strong> - Complete API reference with examples</li>
<li><strong>⚠️ Error Handling</strong> - Centralized error code management</li>
<li><strong>🎨 Beautiful Design</strong> - Clean, modern interface with oatmeal theme</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="https://expo-iap.hyo.dev/blog/welcome-to-expo-iap#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<p>Ready to add in-app purchases to your app? Start with our <a href="https://expo-iap.hyo.dev/docs/installation">installation guide</a> and follow our step-by-step setup process.</p>
<p>Have questions or feedback? We'd love to hear from you on <a href="https://github.com/hyochan/expo-iap" target="_blank" rel="noopener noreferrer">GitHub</a>!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Expo IAP" term="Expo IAP"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
        <category label="React Native" term="React Native"/>
    </entry>
</feed>