"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[6803],{571:(e,n,i)=>{i.d(n,{A:()=>l});var o=i(6540),s=i(4848);function r({className:e="adfit",style:n,unit:i,height:r,width:l}){return(0,o.useEffect)(()=>{const n=setTimeout(()=>{const n=document.querySelector(`.${e}`);if(!n)return void console.warn(`AdFit: Element with class "${e}" not found`);const o=n.querySelectorAll(".kakao_ad_area"),s=n.querySelectorAll('script[src*="kas/static/ba.min.js"]');o.forEach(e=>e.remove()),s.forEach(e=>e.remove());const t=document.createElement("ins"),a=document.createElement("script");t.className="kakao_ad_area",t.style.cssText="display:none; width:100%;",a.async=!0,a.type="text/javascript",a.src="//t1.daumcdn.net/kas/static/ba.min.js",t.setAttribute("data-ad-width",l.toString()),t.setAttribute("data-ad-height",r.toString()),t.setAttribute("data-ad-unit",i),n.appendChild(t),n.appendChild(a)},100);return()=>clearTimeout(n)},[e,i,r,l]),(0,s.jsx)("div",{style:n,children:(0,s.jsx)("div",{className:e})})}function l(){return(0,s.jsx)(r,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},7248:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"installation","title":"Installation","description":"This guide will help you install and configure Expo IAP in your React Native or Expo project.","source":"@site/docs/installation.md","sourceDirName":".","slug":"/installation","permalink":"/docs/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/docs/installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/intro"},"next":{"title":"iOS Setup","permalink":"/docs/getting-started/setup-ios"}}');var s=i(4848),r=i(8453),l=i(571);const t={sidebar_position:2},a="Installation",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Package Installation",id:"package-installation",level:2},{value:"Important for Expo Managed Workflow",id:"important-for-expo-managed-workflow",level:3},{value:"Platform Configuration",id:"platform-configuration",level:2},{value:"For Expo Managed Workflow",id:"for-expo-managed-workflow",level:3},{value:"For React Native CLI Projects",id:"for-react-native-cli-projects",level:3},{value:"iOS",id:"ios",level:4},{value:"Android",id:"android",level:4},{value:"Configuration",id:"configuration",level:2},{value:"App Store Connect (iOS)",id:"app-store-connect-ios",level:3},{value:"Google Play Console (Android)",id:"google-play-console-android",level:3},{value:"Verification",id:"verification",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,s.jsx)(l.A,{}),"\n",(0,s.jsx)(n.p,{children:"This guide will help you install and configure Expo IAP in your React Native or Expo project."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before installing Expo IAP, make sure you have:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"React Native 0.64 or later, or Expo SDK 45 or later"}),"\n",(0,s.jsx)(n.li,{children:"Node.js 16 or later"}),"\n",(0,s.jsx)(n.li,{children:"iOS 12+ for iOS apps (iOS 15+ required for StoreKit 2 features)"}),"\n",(0,s.jsx)(n.li,{children:"Android API level 21+ for Android apps"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"package-installation",children:"Package Installation"}),"\n",(0,s.jsx)(n.p,{children:"Install the package using your favorite package manager:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install expo-iap\n"})}),"\n",(0,s.jsx)(n.h3,{id:"important-for-expo-managed-workflow",children:"Important for Expo Managed Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["If you're using the Expo managed workflow, you ",(0,s.jsx)(n.strong,{children:"must"})," use a ",(0,s.jsx)(n.a,{href:"https://docs.expo.dev/versions/latest/sdk/dev-client/",children:"custom development client"})," since in-app purchases require native modules that aren't available in Expo Go."]}),"\n",(0,s.jsx)(n.p,{children:"After installing the package, you need to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Configure expo-build-properties for Android"})," (required for Kotlin 2.0+ support):"]}),"\n",(0,s.jsxs)(n.p,{children:["Starting from version 2.7, expo-iap supports Google Play Billing Library v8, which requires Kotlin 2.0+. Since ",(0,s.jsx)(n.code,{children:"expo-modules-core"})," doesn't support Kotlin 2.0 yet, you need to manually configure the Kotlin version."]}),"\n",(0,s.jsxs)(n.p,{children:["Add the following to your ",(0,s.jsx)(n.code,{children:"app.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "expo": {\n    "plugins": [\n      "expo-iap",\n      [\n        "expo-build-properties",\n        {\n          "android": {\n            "kotlinVersion": "2.0.21"\n          }\n        }\n      ]\n    ]\n  }\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Install the plugin and run prebuild"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild --clean\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will generate the native iOS and Android directories with the necessary configurations. Learn more about ",(0,s.jsx)(n.a,{href:"https://docs.expo.dev/guides/adopting-prebuild/",children:"adopting prebuild"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create a development build"})," (see the Platform Configuration section below for details)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"platform-configuration",children:"Platform Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"for-expo-managed-workflow",children:"For Expo Managed Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["If you're using Expo managed workflow, you'll need to create a ",(0,s.jsx)(n.a,{href:"https://docs.expo.dev/development/create-development-builds/",children:"custom development client"})," since in-app purchases require native modules that aren't available in Expo Go."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Install EAS CLI"})," (if not already installed):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install -g eas-cli\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create a development build"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"eas build --platform ios --profile development\neas build --platform android --profile development\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"for-react-native-cli-projects",children:"For React Native CLI Projects"}),"\n",(0,s.jsx)(n.p,{children:"If you're using React Native CLI projects, you'll need to install expo-modules-core first:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx install-expo-modules@latest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Learn more about ",(0,s.jsx)(n.a,{href:"https://docs.expo.dev/bare/installing-expo-modules/",children:"installing Expo modules in existing React Native projects"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Then install the native dependencies:"}),"\n",(0,s.jsx)(n.h4,{id:"ios",children:"iOS"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Install pods"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ios && pod install\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Add StoreKit capability"})," to your iOS app in Xcode:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Open your project in Xcode"}),"\n",(0,s.jsx)(n.li,{children:"Select your app target"}),"\n",(0,s.jsx)(n.li,{children:'Go to "Signing & Capabilities"'}),"\n",(0,s.jsx)(n.li,{children:'Click "+ Capability" and add "In-App Purchase"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"android",children:"Android"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," Starting from version 2.7, expo-iap supports Google Play Billing Library v8, which requires Kotlin 2.0+. Since ",(0,s.jsx)(n.code,{children:"expo-modules-core"})," doesn't support Kotlin 2.0 yet, you need to configure your project with ",(0,s.jsx)(n.code,{children:"expo-build-properties"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Add the following to your ",(0,s.jsx)(n.code,{children:"app.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "expo": {\n    "plugins": [\n      "expo-iap",\n      [\n        "expo-build-properties",\n        {\n          "android": {\n            "kotlinVersion": "2.0.21"\n          }\n        }\n      ]\n    ]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"After adding this configuration, run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild --clean\n"})}),"\n",(0,s.jsx)(n.p,{children:"This configuration ensures compatibility with Google Play Billing Library v8.0.0."}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"app-store-connect-ios",children:"App Store Connect (iOS)"}),"\n",(0,s.jsx)(n.p,{children:"Before you can use in-app purchases on iOS, you need to set up your products in App Store Connect:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Sign in to ",(0,s.jsx)(n.a,{href:"https://appstoreconnect.apple.com/",children:"App Store Connect"})]}),"\n",(0,s.jsx)(n.li,{children:"Navigate to your app"}),"\n",(0,s.jsx)(n.li,{children:'Go to "Features" > "In-App Purchases"'}),"\n",(0,s.jsx)(n.li,{children:"Create your products with unique product IDs"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"google-play-console-android",children:"Google Play Console (Android)"}),"\n",(0,s.jsx)(n.p,{children:"For Android, set up your products in Google Play Console:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Sign in to ",(0,s.jsx)(n.a,{href:"https://play.google.com/console/",children:"Google Play Console"})]}),"\n",(0,s.jsx)(n.li,{children:"Navigate to your app"}),"\n",(0,s.jsx)(n.li,{children:'Go to "Monetize" > "Products" > "In-app products"'}),"\n",(0,s.jsx)(n.li,{children:"Create your products with unique product IDs"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,s.jsx)(n.p,{children:"To verify that Expo IAP is properly installed, create a simple test:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {useIAP} from 'expo-iap';\n\nfunction TestComponent() {\n  const {connected} = useIAP();\n\n  console.log('IAP Connection status:', connected);\n\n  return null;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"If everything is set up correctly, you should see the connection status logged in your console."}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"Now that you have Expo IAP installed, you can:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./getting-started/setup-ios",children:"Set up iOS configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./getting-started/setup-android",children:"Set up Android configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./guides/getting-started",children:"Learn basic usage"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"If you encounter issues during installation:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Clear node_modules and reinstall"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"rm -rf node_modules\nnpm install\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For iOS, clean and rebuild pods"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ios\nrm -rf Pods Podfile.lock\npod install\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For Expo projects"}),", use prebuild instead:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild --clean\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For React Native, reset Metro cache"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx react-native start --reset-cache\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more help, check our ",(0,s.jsx)(n.a,{href:"./guides/troubleshooting",children:"Troubleshooting Guide"})," or ",(0,s.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/issues",children:"open an issue"})," on GitHub."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var o=i(6540);const s={},r=o.createContext(s);function l(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);