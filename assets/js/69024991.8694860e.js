"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[2533],{2779:e=>{e.exports=JSON.parse('{"permalink":"/blog/v2-6-3-release","editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/blog/2025-07-22-v2-6-3-release.md","source":"@site/blog/2025-07-22-v2-6-3-release.md","title":"2.6.3 - iOS AppTransaction Support","description":"We\'re excited to announce the release of expo-iap version 2.6.3, which includes critical fixes for iOS AppTransaction functionality.","date":"2025-07-22T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/blog/tags/release","description":"New version releases and updates"},{"inline":false,"label":"iOS","permalink":"/blog/tags/ios","description":"iOS platform specific features"},{"inline":false,"label":"App Transaction","permalink":"/blog/tags/apptransaction","description":"App transaction related features"}],"readingTime":1.88,"hasTruncateMarker":true,"authors":[{"name":"Hyo","title":"Expo IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"v2-6-3-release","title":"2.6.3 - iOS AppTransaction Support","authors":["hyochan"],"tags":["release","ios","apptransaction"]},"unlisted":false,"prevItem":{"title":"2.7.0 - New Platform API & Google Play Billing v8","permalink":"/blog/v2-7-0-release"},"nextItem":{"title":"2.6.0 - Major iOS Improvements","permalink":"/blog/v2-6-0-release"}}')},3304:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>p});var r=i(2779),a=i(4848),s=i(8453);const t={slug:"v2-6-3-release",title:"2.6.3 - iOS AppTransaction Support",authors:["hyochan"],tags:["release","ios","apptransaction"]},o="2.6.3 - iOS AppTransaction Support",l={authorsImageUrls:[void 0]},p=[{value:"What&#39;s New",id:"whats-new",level:2},{value:"Complete AppTransaction Properties",id:"complete-apptransaction-properties",level:3},{value:"Key Properties Added",id:"key-properties-added",level:3},{value:"Usage Example",id:"usage-example",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Bug Fixes",id:"bug-fixes",level:2},{value:"Upgrading",id:"upgrading",level:2},{value:"What&#39;s Next",id:"whats-next",level:2},{value:"Feedback",id:"feedback",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"We're excited to announce the release of expo-iap version 2.6.3, which includes critical fixes for iOS AppTransaction functionality."}),"\n",(0,a.jsx)(n.h2,{id:"whats-new",children:"What's New"}),"\n",(0,a.jsx)(n.h3,{id:"complete-apptransaction-properties",children:"Complete AppTransaction Properties"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"getAppTransactionIOS()"})," function now returns all properties available from Apple's StoreKit 2 AppTransaction API:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"export type AppTransactionIOS = {\n  appTransactionID: string;\n  bundleID: string;\n  appVersion: string;\n  originalAppVersion: string;\n  originalPurchaseDate: number;\n  deviceVerification: string;\n  deviceVerificationNonce: string;\n  environment: string;\n  signedDate: number;\n  appID?: number;\n  appVersionID?: number;\n  originalPlatform: string;\n  preorderDate?: number;\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"key-properties-added",children:"Key Properties Added"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"appTransactionID"})}),": The unique identifier for the app transaction"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"environment"})}),": Indicates whether the transaction occurred in Production, Sandbox, or Xcode environment"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"signedDate"})}),": The date when the transaction was signed"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"appID"})})," and ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"appVersionID"})}),": App Store identifiers for the app and version"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"originalPlatform"})}),": The platform where the app was originally purchased"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"preorderDate"})}),": Available when the app was pre-ordered"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import {getAppTransactionIOS} from 'expo-iap';\n\nconst getAppPurchaseInfo = async () => {\n  try {\n    const appTransaction = await getAppTransactionIOS();\n\n    console.log('App Transaction ID:', appTransaction.appTransactionID);\n    console.log('Environment:', appTransaction.environment);\n    console.log(\n      'Original Purchase Date:',\n      new Date(appTransaction.originalPurchaseDate),\n    );\n\n    // Check if app was pre-ordered\n    if (appTransaction.preorderDate) {\n      console.log('Pre-order Date:', new Date(appTransaction.preorderDate));\n    }\n  } catch (error) {\n    console.error('Failed to get app transaction:', error);\n  }\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,a.jsx)(n.p,{children:"The AppTransaction API provides crucial information about the app's purchase and installation:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Verify app authenticity"}),": Use the device verification data to ensure the app is legitimate"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Track installation source"}),": Determine if the app was purchased, redeemed, or installed via TestFlight"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Environment detection"}),": Easily identify if you're running in production or sandbox"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pre-order support"}),": Handle pre-ordered apps appropriately"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"iOS 16.0 or later"}),"\n",(0,a.jsx)(n.li,{children:"The function will throw an error on older iOS versions"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"bug-fixes",children:"Bug Fixes"}),"\n",(0,a.jsx)(n.p,{children:"This release also includes:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Fixed missing properties in AppTransaction type definition"}),"\n",(0,a.jsx)(n.li,{children:"Corrected property names to match Apple's API exactly"}),"\n",(0,a.jsx)(n.li,{children:"Fixed TypeScript type exports"}),"\n",(0,a.jsxs)(n.li,{children:["Fixed iOS build errors for ",(0,a.jsx)(n.code,{children:"appTransactionID"})," and ",(0,a.jsx)(n.code,{children:"preorderDate"})," mapping"]}),"\n",(0,a.jsxs)(n.li,{children:["Made ",(0,a.jsx)(n.code,{children:"originalPlatform"})," optional as it's only available in iOS 18.4+"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"upgrading",children:"Upgrading"}),"\n",(0,a.jsx)(n.p,{children:"To upgrade to version 2.6.3:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install expo-iap@2.6.3\n# or\nyarn add expo-iap@2.6.3\n# or\nbun add expo-iap@2.6.3\n"})}),"\n",(0,a.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,a.jsx)(n.p,{children:"We're continuing to improve the iOS integration and will be adding more StoreKit 2 features in upcoming releases. Stay tuned!"}),"\n",(0,a.jsx)(n.h2,{id:"feedback",children:"Feedback"}),"\n",(0,a.jsxs)(n.p,{children:["If you encounter any issues or have suggestions, please ",(0,a.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/issues",children:"open an issue"})," on our GitHub repository."]}),"\n",(0,a.jsx)(n.p,{children:"Happy coding! \ud83d\ude80"})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var r=i(6540);const a={},s=r.createContext(a);function t(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);