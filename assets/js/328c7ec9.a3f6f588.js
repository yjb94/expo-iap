"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[5283],{571:(e,n,r)=>{r.d(n,{A:()=>c});var t=r(6540),s=r(4848);function i({className:e="adfit",style:n,unit:r,height:i,width:c}){return(0,t.useEffect)(()=>{const n=setTimeout(()=>{const n=document.querySelector(`.${e}`);if(!n)return void console.warn(`AdFit: Element with class "${e}" not found`);const t=n.querySelectorAll(".kakao_ad_area"),s=n.querySelectorAll('script[src*="kas/static/ba.min.js"]');t.forEach(e=>e.remove()),s.forEach(e=>e.remove());const o=document.createElement("ins"),a=document.createElement("script");o.className="kakao_ad_area",o.style.cssText="display:none; width:100%;",a.async=!0,a.type="text/javascript",a.src="//t1.daumcdn.net/kas/static/ba.min.js",o.setAttribute("data-ad-width",c.toString()),o.setAttribute("data-ad-height",i.toString()),o.setAttribute("data-ad-unit",r),n.appendChild(o),n.appendChild(a)},100);return()=>clearTimeout(n)},[e,r,i,c]),(0,s.jsx)("div",{style:n,children:(0,s.jsx)("div",{className:e})})}function c(){return(0,s.jsx)(i,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},1430:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"intro","title":"Expo IAP","description":"Expo IAP is a powerful in-app purchase solution for Expo and React Native applications that conforms to the Open IAP specification. It provides a unified API for handling in-app purchases across iOS and Android platforms with comprehensive error handling and modern TypeScript support.","source":"@site/versioned_docs/version-2.7/intro.md","sourceDirName":".","slug":"/intro","permalink":"/docs/2.7/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/versioned_docs/version-2.7/intro.md","tags":[],"version":"2.7","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","next":{"title":"Installation","permalink":"/docs/2.7/installation"}}');var s=r(4848),i=r(8453),c=r(571);const o={sidebar_position:1},a="Expo IAP",l={},d=[{value:"\ud83d\udcda Guides",id:"-guides",level:2},{value:"\ud83d\udee0\ufe0f Advanced Topicsnd modern TypeScript support.",id:"\ufe0f-advanced-topicsnd-modern-typescript-support",level:3},{value:"\u2728 Features",id:"-features",level:2},{value:"\ud83d\ude80 Quick Start",id:"-quick-start",level:2},{value:"Installation",id:"installation",level:3},{value:"1. Basic Setup",id:"1-basic-setup",level:3},{value:"2. Fetch Products",id:"2-fetch-products",level:3},{value:"3. Display Products",id:"3-display-products",level:3},{value:"4. Handle Purchases",id:"4-handle-purchases",level:3},{value:"5. Complete Transactions",id:"5-complete-transactions",level:3},{value:"Complete Basic Example",id:"complete-basic-example",level:3},{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:2},{value:"\ud83d\udcf1 Platform Support",id:"-platform-support",level:2},{value:"\ud83c\udfaf What&#39;s Next?",id:"-whats-next",level:2},{value:"\ud83d\udce6 Setup &amp; Configuration",id:"-setup--configuration",level:3},{value:"\ud83d\udd27 Implementation",id:"-implementation",level:3},{value:"\ud83d\udcda Guides",id:"-guides-1",level:3},{value:"\ud83d\udee0\ufe0f Advanced Topics",id:"\ufe0f-advanced-topics",level:3},{value:"\ud83e\udd1d Contributing",id:"-contributing",level:2},{value:"\ud83d\udcdd License",id:"-license",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"expo-iap",children:"Expo IAP"})}),"\n",(0,s.jsx)(c.A,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expo IAP"})," is a powerful in-app purchase solution for Expo and React Native applications that ",(0,s.jsxs)(n.strong,{children:["conforms to the ",(0,s.jsx)(n.a,{href:"https://openiap.dev",children:"Open IAP specification"})]}),". It provides a unified API for handling in-app purchases across iOS and Android platforms with comprehensive error handling and modern TypeScript support."]}),"\n",(0,s.jsx)(n.h2,{id:"-guides",children:"\ud83d\udcda Guides"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/getting-started",children:(0,s.jsx)(n.strong,{children:"Getting Started"})}),": Complete guide to implementing in-app purchases"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/lifecycle",children:(0,s.jsx)(n.strong,{children:"Purchase Lifecycle"})}),": Understanding connection management and best practices"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/purchases",children:(0,s.jsx)(n.strong,{children:"Purchase Implementation"})}),": Detailed purchase flow and event handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/migration",children:(0,s.jsx)(n.strong,{children:"Migration Guide"})}),": Migrating from react-native-iap to expo-iap"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/faq",children:(0,s.jsx)(n.strong,{children:"FAQ"})}),": Frequently asked questions and solutions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/support",children:(0,s.jsx)(n.strong,{children:"Support"})}),": Getting help and community resources"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-advanced-topicsnd-modern-typescript-support",children:"\ud83d\udee0\ufe0f Advanced Topicsnd modern TypeScript support."}),"\n",(0,s.jsx)(n.h2,{id:"-features",children:"\u2728 Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd04 ",(0,s.jsx)(n.strong,{children:"Cross-platform Support"}),": Works seamlessly on both iOS and Android"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,s.jsx)(n.strong,{children:"TypeScript First"}),": Full TypeScript support with comprehensive type definitions"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udee1\ufe0f ",(0,s.jsx)(n.strong,{children:"Centralized Error Handling"}),": Unified error management with platform-specific error code mapping"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83c\udfa3 ",(0,s.jsx)(n.strong,{children:"React Hooks"}),": Modern React hooks API with ",(0,s.jsx)(n.code,{children:"useIAP"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcf1 ",(0,s.jsx)(n.strong,{children:"Expo Compatible"}),": Built specifically for Expo with a seamless plugin experience"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd0d ",(0,s.jsx)(n.strong,{children:"Receipt Validation"}),": Built-in receipt validation for both platforms"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udc8e ",(0,s.jsx)(n.strong,{children:"Products & Subscriptions"}),": Support for both one-time purchases and subscriptions"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\ude80 ",(0,s.jsx)(n.strong,{children:"Performance Optimized"}),": Efficient caching and minimal re-renders"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-quick-start",children:"\ud83d\ude80 Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"Install the package using your favorite package manager:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install expo-iap\n"})}),"\n",(0,s.jsx)(n.h3,{id:"1-basic-setup",children:"1. Basic Setup"}),"\n",(0,s.jsx)(n.p,{children:"First, import and initialize the IAP hook:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {useIAP} from 'expo-iap';\n\nfunction MyStore() {\n  const {\n    connected,\n    products,\n    getProducts,\n    requestPurchase,\n    currentPurchase,\n    finishTransaction,\n  } = useIAP();\n\n  const productIds = ['your.product.id', 'your.premium.subscription'];\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-fetch-products",children:"2. Fetch Products"}),"\n",(0,s.jsx)(n.p,{children:"Load your products when the store connects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (connected) {\n    // Fetch your products\n    getProducts(productIds);\n  }\n}, [connected]);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-display-products",children:"3. Display Products"}),"\n",(0,s.jsx)(n.p,{children:"Show available products to users:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"return (\n  <View>\n    <Text>Store Status: {connected ? 'Connected' : 'Connecting...'}</Text>\n\n    {products.map((product) => (\n      <View key={product.id} style={styles.productItem}>\n        <Text style={styles.productTitle}>{product.title}</Text>\n        <Text style={styles.productPrice}>{product.displayPrice}</Text>\n        <Button title=\"Buy Now\" onPress={() => handlePurchase(product.id)} />\n      </View>\n    ))}\n  </View>\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-handle-purchases",children:"4. Handle Purchases"}),"\n",(0,s.jsx)(n.p,{children:"Process purchase requests with platform-specific handling:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {Platform} from 'react-native';\n\nconst handlePurchase = async (productId: string) => {\n  try {\n    if (Platform.OS === 'ios') {\n      // iOS: single product purchase\n      await requestPurchase({\n        request: {sku: productId},\n      });\n    } else if (Platform.OS === 'android') {\n      // Android: array of products\n      await requestPurchase({\n        request: {skus: [productId]},\n      });\n    }\n  } catch (error) {\n    console.error('Purchase failed:', error);\n  }\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why the difference?"})," iOS can only purchase one product at a time, while Android supports purchasing multiple products in a single transaction."]}),"\n",(0,s.jsx)(n.h3,{id:"5-complete-transactions",children:"5. Complete Transactions"}),"\n",(0,s.jsx)(n.p,{children:"Finish purchases when they complete:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (currentPurchase) {\n    const completePurchase = async () => {\n      try {\n        // Grant the purchase to user here\n        console.log('Purchase completed:', currentPurchase.id);\n\n        // Finish the transaction\n        await finishTransaction({\n          purchase: currentPurchase,\n          isConsumable: true, // Set based on your product type\n        });\n      } catch (error) {\n        console.error('Failed to complete purchase:', error);\n      }\n    };\n\n    completePurchase();\n  }\n}, [currentPurchase]);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"complete-basic-example",children:"Complete Basic Example"}),"\n",(0,s.jsx)(n.p,{children:"Here's a complete working example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import React, {useEffect} from 'react';\nimport {View, Text, Button, StyleSheet, Platform} from 'react-native';\nimport {useIAP} from 'expo-iap';\n\nexport default function SimpleStore() {\n  const {\n    connected,\n    products,\n    getProducts,\n    requestPurchase,\n    currentPurchase,\n    finishTransaction,\n  } = useIAP();\n\n  const productIds = ['com.example.coins.pack1', 'com.example.premium'];\n\n  useEffect(() => {\n    if (connected) {\n      getProducts(productIds);\n    }\n  }, [connected]);\n\n  useEffect(() => {\n    if (currentPurchase) {\n      const completePurchase = async () => {\n        try {\n          console.log('Purchase completed:', currentPurchase.id);\n          await finishTransaction({\n            purchase: currentPurchase,\n            isConsumable: true,\n          });\n        } catch (error) {\n          console.error('Failed to complete purchase:', error);\n        }\n      };\n      completePurchase();\n    }\n  }, [currentPurchase]);\n\n  const handlePurchase = async (productId: string) => {\n    try {\n      if (Platform.OS === 'ios') {\n        // iOS: single product purchase\n        await requestPurchase({\n          request: {sku: productId},\n        });\n      } else if (Platform.OS === 'android') {\n        // Android: array of products\n        await requestPurchase({\n          request: {skus: [productId]},\n        });\n      }\n    } catch (error) {\n      console.error('Purchase failed:', error);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.status}>\n        Store: {connected ? 'Connected \u2705' : 'Connecting...'}\n      </Text>\n\n      {products.map((product) => (\n        <View key={product.id} style={styles.product}>\n          <Text style={styles.title}>{product.title}</Text>\n          <Text style={styles.price}>{product.displayPrice}</Text>\n          <Button title=\"Buy Now\" onPress={() => handlePurchase(product.id)} />\n        </View>\n      ))}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {padding: 20},\n  status: {fontSize: 16, marginBottom: 20},\n  product: {\n    padding: 15,\n    marginVertical: 5,\n    backgroundColor: '#f0f0f0',\n    borderRadius: 8,\n  },\n  title: {fontSize: 16, fontWeight: 'bold'},\n  price: {fontSize: 14, color: '#666', marginVertical: 5},\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,s.jsx)(n.p,{children:"Expo IAP is built with a modern architecture that emphasizes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Safety"}),": Comprehensive TypeScript definitions for all APIs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Resilience"}),": Centralized error handling with meaningful error codes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Platform Abstraction"}),": Unified API that handles platform differences internally"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance"}),": Optimized for minimal bundle size and runtime performance"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-platform-support",children:"\ud83d\udcf1 Platform Support"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"Support"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"iOS"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"StoreKit 1 & 2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Android"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"Google Play Billing v5+"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Expo Go"}),(0,s.jsx)(n.td,{children:"\u26a0\ufe0f"}),(0,s.jsx)(n.td,{children:"Limited (requires custom development client)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Expo Dev Client"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"Full support"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bare React Native"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"Full support"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"-whats-next",children:"\ud83c\udfaf What's Next?"}),"\n",(0,s.jsx)(n.h3,{id:"-setup--configuration",children:"\ud83d\udce6 Setup & Configuration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./installation",children:(0,s.jsx)(n.strong,{children:"Installation Guide"})}),": Install and configure Expo IAP"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./getting-started/setup-ios",children:(0,s.jsx)(n.strong,{children:"iOS Setup"})}),": App Store Connect and Xcode configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./getting-started/setup-android",children:(0,s.jsx)(n.strong,{children:"Android Setup"})}),": Google Play Console setup"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-implementation",children:"\ud83d\udd27 Implementation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./api/use-iap",children:(0,s.jsx)(n.strong,{children:"API Reference"})}),": Complete useIAP hook documentation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./examples/basic-store",children:(0,s.jsx)(n.strong,{children:"Basic Store Example"})}),": Simple product store implementation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./examples/complete-impl",children:(0,s.jsx)(n.strong,{children:"Complete Store Example"})}),": Production-ready store with validation"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-guides-1",children:"\ud83d\udcda Guides"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/getting-started",children:(0,s.jsx)(n.strong,{children:"Getting Started"})}),": Complete guide to implementing in-app purchases"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/lifecycle",children:(0,s.jsx)(n.strong,{children:"Purchase Lifecycle"})}),": Understanding connection management and best practices"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/purchases",children:(0,s.jsx)(n.strong,{children:"Purchase Implementation"})}),": Detailed purchase flow and event handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/migration",children:(0,s.jsx)(n.strong,{children:"Migration Guide"})}),": Migrating from react-native-iap to expo-iap"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/faq",children:(0,s.jsx)(n.strong,{children:"FAQ"})}),": Frequently asked questions and solutions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/support",children:(0,s.jsx)(n.strong,{children:"Support"})}),": Getting help and community resources"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-advanced-topics",children:"\ud83d\udee0\ufe0f Advanced Topics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/purchases",children:(0,s.jsx)(n.strong,{children:"Receipt Validation"})}),": Secure purchase validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./api/error-codes",children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),": Comprehensive error management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./examples/subscription-manager",children:(0,s.jsx)(n.strong,{children:"Subscription Management"})}),": Handle recurring subscriptions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./guides/troubleshooting",children:(0,s.jsx)(n.strong,{children:"Troubleshooting"})}),": Common issues and solutions"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-contributing",children:"\ud83e\udd1d Contributing"}),"\n",(0,s.jsxs)(n.p,{children:["We welcome contributions! Please see our ",(0,s.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/blob/main/CONTRIBUTING.md",children:"Contributing Guide"})," for details."]}),"\n",(0,s.jsx)(n.h2,{id:"-license",children:"\ud83d\udcdd License"}),"\n",(0,s.jsxs)(n.p,{children:["This project is licensed under the MIT License - see the ",(0,s.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/blob/main/LICENSE",children:"LICENSE"})," file for details."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function c(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);