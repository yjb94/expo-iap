"use strict";(self.webpackChunkexpo_iap_docs=self.webpackChunkexpo_iap_docs||[]).push([[1838],{5159:e=>{e.exports=JSON.parse('{"permalink":"/blog/v2-8-1-release","editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/blog/2025-08-19-v2-8-1-release.md","source":"@site/blog/2025-08-19-v2-8-1-release.md","title":"v2.8.1 Release - Type System Improvements","description":"This release resolves type mismatches between Product and Purchase types across iOS and Android platforms.","date":"2025-08-19T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/blog/tags/release","description":"New version releases and updates"},{"inline":true,"label":"types","permalink":"/blog/tags/types"},{"inline":false,"label":"iOS","permalink":"/blog/tags/ios","description":"iOS platform specific features"},{"inline":false,"label":"Android","permalink":"/blog/tags/android","description":"Android platform specific features"}],"readingTime":0.89,"hasTruncateMarker":false,"authors":[{"name":"Hyo","title":"Expo IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"v2-8-1-release","title":"v2.8.1 Release - Type System Improvements","authors":["hyochan"],"tags":["release","types","ios","android"]},"unlisted":false,"nextItem":{"title":"v2.8.0 Migration Guide - iOS Field Naming Convention Update","permalink":"/blog/v2-8-0-migration-guide"}}')},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}},9055:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var s=i(5159),t=i(4848),o=i(8453);const a={slug:"v2-8-1-release",title:"v2.8.1 Release - Type System Improvements",authors:["hyochan"],tags:["release","types","ios","android"]},r="expo-iap v2.8.1 Release",l={authorsImageUrls:[void 0]},d=[{value:"What&#39;s New",id:"whats-new",level:2},{value:"Type System Improvements",id:"type-system-improvements",level:3},{value:"No Breaking Changes",id:"no-breaking-changes",level:3},{value:"Important Note",id:"important-note",level:2},{value:"Type Discrimination Example",id:"type-discrimination-example",level:2},{value:"Installation",id:"installation",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This release resolves type mismatches between Product and Purchase types across iOS and Android platforms."}),"\n",(0,t.jsx)(n.h2,{id:"whats-new",children:"What's New"}),"\n",(0,t.jsx)(n.h3,{id:"type-system-improvements",children:"Type System Improvements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Added ",(0,t.jsx)(n.code,{children:"platform"})," field to all types for runtime type discrimination"]}),"\n",(0,t.jsxs)(n.li,{children:["Moved common fields (",(0,t.jsx)(n.code,{children:"ids"}),", ",(0,t.jsx)(n.code,{children:"debugDescription"}),") to shared base types"]}),"\n",(0,t.jsx)(n.li,{children:"Fixed iOS native code to populate missing subscription fields"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"no-breaking-changes",children:"No Breaking Changes"}),"\n",(0,t.jsx)(n.p,{children:"All existing code continues to work. Update to platform-specific field names before v2.9.0:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Android: ",(0,t.jsx)(n.code,{children:"name"})," \u2192 ",(0,t.jsx)(n.code,{children:"nameAndroid"})]}),"\n",(0,t.jsxs)(n.li,{children:["iOS: ",(0,t.jsx)(n.code,{children:"displayName"})," \u2192 ",(0,t.jsx)(n.code,{children:"displayNameIOS"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"important-note",children:"Important Note"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"If upgrading from versions before v2.8.0"}),", please review the ",(0,t.jsx)(n.a,{href:"https://expo-iap.hyo.dev/blog/v2-8-0-migration-guide",children:"v2.8.0 migration guide"})," first, as it contains breaking changes for iOS field naming conventions."]}),"\n",(0,t.jsx)(n.h2,{id:"type-discrimination-example",children:"Type Discrimination Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import {Product, Purchase} from 'expo-iap';\n\nfunction handleProduct(product: Product) {\n  if (product.platform === 'ios') {\n    // TypeScript knows this is ProductIOS\n    console.log(product.isFamilyShareableIOS);\n  } else if (product.platform === 'android') {\n    // TypeScript knows this is ProductAndroid\n    console.log(product.nameAndroid);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install expo-iap@2.8.1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsx)(n.p,{children:"Deprecated fields will be removed in v2.9.0. Update your code now to ensure smooth migration."}),"\n",(0,t.jsxs)(n.p,{children:["For details, see the ",(0,t.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/blob/main/CHANGELOG.md",children:"full changelog"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);